import{u as F,_ as L,j as e,r as w,o as k,$ as E,x as P,L as q,h as A,s as i}from"./index-BIirldc1.js";import{u as R}from"./index.esm-DeL_VMPh.js";import{a as G,L as l}from"./label-BoUK3cZg.js";import{u as S}from"./useMutation-DLDY0_Jn.js";import{B as _}from"./button-C2PM_K_5.js";import{I as c}from"./input-DMyO_KgQ.js";import{C as M,a as B,c as H}from"./card-B_B2k0jE.js";import{N as O}from"./ngs360-logo-CZCZml11.js";import{t as v}from"./index-CbXsuHis.js";import{D as I,b as U,c as Y,d as J,e as T,f as $}from"./dialog-Dv2OS8bo.js";function z({open:a,onOpenChange:x,data:u}){const d=F(),{mutate:p}=S({...L(),onError:n=>{var r,m;const g=((m=(r=n.response)==null?void 0:r.data.detail)==null?void 0:m.toString())||"An unknown error occurred.";v.error(g)},onSuccess:()=>{v.success("Login successful"),d({to:"/"})}}),h=()=>{const n={...u,grant_type:"password"};p({body:n})};return e.jsx(I,{open:a,onOpenChange:x,children:e.jsxs(U,{children:[e.jsxs(Y,{children:[e.jsx(J,{children:"Success!"}),e.jsxs(T,{children:["Your account has been created successfully! ",e.jsx("br",{}),"Click continue to login to the NGS360 portal."]})]}),e.jsx($,{children:e.jsx(_,{onClick:()=>h(),children:"Continue"})})]})})}const K=k({username:i().min(3,"Username must be at least 3 characters"),email:i().email("Please enter a valid email address"),full_name:i().min(2,"Full name must be at least 2 characters"),password:i().min(8,"Password must be at least 8 characters").max(50),confirm_password:i().min(8).max(50)}).refine(a=>a.password===a.confirm_password,{message:"Passwords do not match",path:["confirm_password"]});function Q({className:a,...x}){const[u,d]=w.useState(!1),[p,h]=w.useState(""),[n,g]=w.useState(""),{register:r,handleSubmit:m,setError:y,formState:{errors:s,isSubmitting:f}}=R({resolver:G(K)}),{mutate:C,isPending:j}=S({...E(),onError:t=>{var N,b;const o=((b=(N=t.response)==null?void 0:N.data.detail)==null?void 0:b.toString())||"An unknown error occurred.";y("root",{message:o})},onSuccess:(t,o)=>{h(o.body.email),g(o.body.password),d(!0)}}),D=async t=>{const o={username:t.username,email:t.email,full_name:t.full_name,password:t.password};C({body:{...o}})};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-primary-2/5 p-4",children:[e.jsx(z,{open:u,onOpenChange:d,data:{username:p,password:n}}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs(M,{children:[e.jsx(B,{}),e.jsx(H,{children:e.jsxs("form",{onSubmit:m(D),className:P("flex flex-col gap-6",a),...x,children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx(O,{className:"mb-2"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Create an account"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"Register for a new NGS360 account."})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"username",children:"Username"}),e.jsx(c,{...r("username"),id:"username",type:"text",placeholder:"johndoe",required:!0}),s.username&&e.jsx("div",{className:"text-red-500 text-xs text-left",children:s.username.message})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"full_name",children:"Full Name"}),e.jsx(c,{...r("full_name"),id:"full_name",type:"text",placeholder:"John Doe",required:!0}),s.full_name&&e.jsx("div",{className:"text-red-500 text-xs text-left",children:s.full_name.message})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(c,{...r("email"),id:"email",type:"email",placeholder:"john.doe@example.com",required:!0}),s.email&&e.jsx("div",{className:"text-red-500 text-xs text-left",children:s.email.message})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"password",children:"Password"}),e.jsx(c,{...r("password"),id:"password",type:"password",placeholder:"********",required:!0}),s.password&&e.jsx("div",{className:"text-red-500 text-xs text-left",children:s.password.message})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"confirm_password",children:"Confirm Password"}),e.jsx(c,{...r("confirm_password"),id:"confirm_password",type:"password",placeholder:"********",required:!0}),s.confirm_password&&e.jsx("div",{className:"text-red-500 text-xs text-left",children:s.confirm_password.message})]})]}),e.jsxs(_,{disabled:f||j,type:"submit",className:"flex items-center gap-2",children:[f||j?e.jsx(q,{className:"animate-spin h-4 w-4 text-white"}):null,f||j?"Creating account...":"Create Account"]}),s.root&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:s.root.message}),e.jsxs("div",{className:"text-center text-sm",children:["Already have an account?"," ",e.jsx(A,{to:"/login",className:"underline underline-offset-4",children:"Log in"})]})]})})]}),e.jsx("div",{className:"text-center mt-6 text-sm text-muted-foreground",children:e.jsxs("p",{children:["Â© ",new Date().getFullYear()," BMS NGS360. All rights reserved."]})})]})]})}const ne=function(){return e.jsx(Q,{})};export{ne as component};
//# sourceMappingURL=_user.register.index-O9mrQfiV.js.map
