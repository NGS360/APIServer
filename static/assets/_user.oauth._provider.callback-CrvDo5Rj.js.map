{"version":3,"file":"_user.oauth._provider.callback-CrvDo5Rj.js","sources":["../../src/routes/_user.oauth.$provider.callback.tsx?tsr-split=component"],"sourcesContent":["import { createFileRoute, redirect } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/_user/oauth/$provider/callback')({\n  validateSearch: (search: Record<string, unknown>) => {\n    return {\n      code: (search.code as string) || '',\n      state: (search.state as string) || '',\n    }\n  },\n  beforeLoad: async ({ params, search, context }) => {\n    const { provider } = params\n    const { code, state } = search\n\n    if (!code || !state) {\n      throw new Error('Missing authentication parameters')\n    }\n\n    try {\n      const redirectUri = `${window.location.origin}/oauth/${provider}/callback`\n      \n      // Auth provider handles the API call and token storage\n      await context.auth.oauthLogin(provider, code, state, redirectUri)\n      \n      // Redirect to the main app\n      throw redirect({ to: '/' })\n    } catch (err: any) {\n      // If it's a redirect, re-throw it\n      if (err.isRedirect) {\n        throw err\n      }\n      \n      // Otherwise, throw error for error component\n      throw err\n    }\n  },\n  component: () => <div>Redirecting...</div>, // Never renders - beforeLoad always redirects\n  errorComponent: OAuthErrorComponent,\n})\n\nfunction OAuthErrorComponent({ error }: { error: Error }) {\n  return (\n    <div className=\"flex items-center justify-center min-h-screen\">\n      <div className=\"text-center max-w-md p-6 bg-destructive/10 rounded-lg border border-destructive\">\n        <h2 className=\"text-2xl font-bold text-destructive mb-4\">\n          Authentication Error\n        </h2>\n        <p className=\"text-muted-foreground mb-4\">{error.message}</p>\n        <a\n          href=\"/login\"\n          className=\"inline-block px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90\"\n        >\n          Back to Login\n        </a>\n      </div>\n    </div>\n  )\n}\n"],"names":["SplitComponent","jsx"],"mappings":"wCAmCaA,MAAAA,EAAAA,IAAOC,EAAA,IAAA,MAAA,CAAI,SAAc,gBAAA,CAAA"}