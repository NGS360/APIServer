import{j as e,u as $,e as C,r as _,o as F,x as k,h as p,L as A,s as E,a0 as G,a1 as B}from"./index-BIirldc1.js";import{u as D}from"./useQuery-CTa4JkgR.js";import{B as x}from"./button-C2PM_K_5.js";import{C as j,a as N,c as w}from"./card-B_B2k0jE.js";import{N as b}from"./ngs360-logo-CZCZml11.js";import{u as I}from"./index.esm-DeL_VMPh.js";import{a as O,L as h}from"./label-BoUK3cZg.js";import{t as R}from"./index-CbXsuHis.js";import{I as f}from"./input-DMyO_KgQ.js";import{S as q}from"./separator-ClsyK3GL.js";import"./useBaseQuery-o_MHl0Bk.js";function z({provider:s,onLogin:a,apiUrl:r}){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-primary-2/5 p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs(j,{children:[e.jsx(N,{}),e.jsx(w,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx(b,{className:"mb-2"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Login"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"Sign in with your corporate account to access NGS360."})]}),e.jsxs(x,{type:"button",variant:"outline",onClick:()=>a(s.name,`${r}${s.authorize_url}`),className:"flex items-center gap-2 w-full",size:"lg",children:[s.logo_url&&e.jsx("img",{src:`${r}${s.logo_url}`,alt:`${s.display_name} logo`,className:"h-5 w-5"}),s.display_name]})]})})]}),e.jsx("div",{className:"text-center mt-6 text-sm text-muted-foreground",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," BMS NGS360. All rights reserved."]})})]})})}const M=F({username:G("Please enter a valid email address"),password:E().min(8,"Password must be at least 8 characters").max(50)});function Y({className:s,oauthProviders:a,onOAuthLogin:r,apiUrl:i,...l}){const c=$(),{basicLogin:m}=C(),[o,u]=_.useState(!1),{register:g,handleSubmit:v,setError:y,formState:{errors:n}}=I({defaultValues:{username:"",password:""},resolver:O(M)}),L=async t=>{u(!0);try{await m(t.username,t.password),R.success("Login successful"),c({to:"/"})}catch(d){const S=(d==null?void 0:d.message)||"An unknown error occurred.";y("root",{message:S})}finally{u(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-primary-2/5 p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs(j,{children:[e.jsx(N,{}),e.jsx(w,{children:e.jsxs("form",{onSubmit:v(L),className:k("flex flex-col gap-6",s),...l,children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx(b,{className:"mb-2"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Login"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"Enter your email and password below to login to your NGS360 account."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"email",children:"Email"}),e.jsx(f,{...g("username"),id:"email",type:"email",placeholder:"user@example.com",required:!0}),n.username&&e.jsx("div",{className:"text-red-500 text-xs text-left",children:n.username.message})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{htmlFor:"password",children:"Password"}),e.jsx(p,{to:"/forgot-password",className:"text-xs underline-offset-4 hover:underline",children:"Forgot your password?"})]}),e.jsx(f,{...g("password"),id:"password",type:"password",placeholder:"********",required:!0}),n.password&&e.jsx("div",{className:"text-red-500 text-xs text-left",children:n.password.message})]})]}),e.jsxs(x,{disabled:o,type:"submit",className:"flex items-center gap-2",children:[o?e.jsx(A,{className:"animate-spin h-4 w-4 text-white"}):null,o?"Logging in...":"Login"]}),n.root&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:n.root.message}),a&&a.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(q,{})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"or continue with"})})]}),e.jsx("div",{className:"grid gap-2",children:a.map(t=>e.jsxs(x,{type:"button",variant:"outline",onClick:()=>r(t.name,`${i}${t.authorize_url}`),className:"flex items-center gap-2",children:[t.logo_url&&e.jsx("img",{src:`${t.logo_url}`,alt:`${t.display_name} logo`,className:"h-5 w-5"}),t.display_name]},t.name))})]}),e.jsxs("div",{className:"text-center text-sm",children:["Don't have an account?"," ",e.jsx(p,{to:"/register",className:"underline underline-offset-4",children:"Create an account"})]})]})})]}),e.jsx("div",{className:"text-center mt-6 text-sm text-muted-foreground",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," BMS NGS360. All rights reserved."]})})]})})}function H(){const s="https://ngsdev.rdcloud.bms.com".replace(/\/$/,""),{data:a}=D(B()),r=(l,c)=>{const m=`${window.location.origin}/oauth/${l}/callback`,o=c.includes("?")?"&":"?";window.location.href=`${c}${o}redirect_uri=${encodeURIComponent(m)}`},i=a==null?void 0:a.providers.find(l=>l.name==="corp");return i?e.jsx(z,{provider:i,onLogin:r,apiUrl:s}):e.jsx(Y,{oauthProviders:a==null?void 0:a.providers,onOAuthLogin:r,apiUrl:s})}const se=function(){return e.jsx(H,{})};export{se as component};
//# sourceMappingURL=_user.login.index-BySUdogl.js.map
