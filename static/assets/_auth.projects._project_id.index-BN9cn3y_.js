import{c as Q,r as i,n as J,P as O,az as Cr,aA as wr,aB as Ar,aC as _r,t as me,j as e,x as z,z as F,X as Ir,aD as Rr,aE as Tr,aF as kr,aG as Pr,aa as ht,ab as vt,ac as xt,ad as gt,ae as bt,af as jt,aH as $e,ag as yt,ah as Nt,m as he,k as ae,l as ve,q as Mr,v as Ue,aI as Or,aJ as Fr,a as St,aK as Dr,aL as Lr,aM as Vr,aN as $r,h as Ur,ak as Gr,al as Br,F as Kr,am as zr,o as Et,aO as qr,g as Hr,aP as Qr,aQ as Wr,L as Jr,d as Yr,s as Ge,aR as Xr,ay as Zr,a5 as ea,B as Re,aS as it,aT as ta}from"./index-BIirldc1.js";import{u as ra}from"./useSuspenseQuery-CDS_6Znd.js";import{C as ue}from"./copyable-text-hzJJx6rD.js";import{C as aa,a as Te,g as sa}from"./sortable-header-CBUhMdW4.js";import{t as ee}from"./index-CbXsuHis.js";import{u as ye}from"./useQuery-CTa4JkgR.js";import{u as Se}from"./useMutation-DLDY0_Jn.js";import{P as na,a as oa,b as la}from"./popover-Daw9D_6H.js";import{S as ia}from"./search-SEwO8_4z.js";import{C as Ct,F as Be}from"./file-browser-BAEarV4r.js";import{C as Ke}from"./check-DV4XU-UY.js";import{B as G}from"./button-C2PM_K_5.js";import{L as fe,a as ca}from"./label-BoUK3cZg.js";import{a as da,u as ua}from"./use-job-queries-C1A_Ye7H.js";import{Z as wt}from"./zap-BU4rm8MZ.js";import{F as At}from"./file-upload-CeWw_3EI.js";import{C as W,a as le,b as X,d as Z,c as ct}from"./card-B_B2k0jE.js";import{C as pa}from"./circle-check-CmdczWJV.js";import{C as ma}from"./circle-x-D_RBEnZV.js";import{I as ie}from"./input-DMyO_KgQ.js";import{d as _t,u as fa,P as It}from"./index-P1ukJAZU.js";import{u as Je,c as Rt,P as ha}from"./scroll-area-BlkD1AVU.js";import{u as va,a as xa}from"./index.esm-DeL_VMPh.js";import{D as ga,a as ba,b as ja,c as ya,d as Na,e as Sa,f as Ea,g as Ca}from"./dialog-Dv2OS8bo.js";import{T as wa}from"./trash-2-BM_fEEzK.js";import"./useBaseQuery-o_MHl0Bk.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],_a=Q("Building2",Aa);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Ra=Q("ChevronsUpDown",Ia);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ka=Q("Circle",Ta);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],Ma=Q("Cog",Pa);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 15h10",key:"jfw4w8"}],["path",{d:"m9 18 3-3-3-3",key:"112psh"}]],Fa=Q("FileInput",Oa);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"m9 13 2 2 4-4",key:"6343dt"}]],La=Q("FolderCheck",Da);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]],$a=Q("FolderSearch",Va);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ga=Q("Pencil",Ua);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=[["path",{d:"M18 11h-4a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h4",key:"17ldeb"}],["path",{d:"M6 7v13a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7",key:"nc37y6"}],["rect",{width:"16",height:"5",x:"4",y:"2",rx:"1",key:"3jeezo"}]],Ka=Q("PillBottle",Ba);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],qa=Q("Tag",za);var dt=1,Ha=.9,Qa=.8,Wa=.17,ke=.1,Pe=.999,Ja=.9999,Ya=.99,Xa=/[\\\/_+.#"@\[\(\{&]/,Za=/[\\\/_+.#"@\[\(\{&]/g,es=/[\s-]/,Tt=/[\s-]/g;function ze(t,a,r,o,s,n,l){if(n===a.length)return s===t.length?dt:Ya;var d=`${s},${n}`;if(l[d]!==void 0)return l[d];for(var p=o.charAt(n),c=r.indexOf(p,s),f=0,h,x,v,S;c>=0;)h=ze(t,a,r,o,c+1,n+1,l),h>f&&(c===s?h*=dt:Xa.test(t.charAt(c-1))?(h*=Qa,v=t.slice(s,c-1).match(Za),v&&s>0&&(h*=Math.pow(Pe,v.length))):es.test(t.charAt(c-1))?(h*=Ha,S=t.slice(s,c-1).match(Tt),S&&s>0&&(h*=Math.pow(Pe,S.length))):(h*=Wa,s>0&&(h*=Math.pow(Pe,c-s))),t.charAt(c)!==a.charAt(n)&&(h*=Ja)),(h<ke&&r.charAt(c-1)===o.charAt(n+1)||o.charAt(n+1)===o.charAt(n)&&r.charAt(c-1)!==o.charAt(n))&&(x=ze(t,a,r,o,c+1,n+2,l),x*ke>h&&(h=x*ke)),h>f&&(f=h),c=r.indexOf(p,c+1);return l[d]=f,f}function ut(t){return t.toLowerCase().replace(Tt," ")}function ts(t,a,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,ze(t,a,ut(t),ut(a),0,0,{})}var pe='[cmdk-group=""]',Me='[cmdk-group-items=""]',rs='[cmdk-group-heading=""]',kt='[cmdk-item=""]',pt=`${kt}:not([aria-disabled="true"])`,qe="cmdk-item-select",ne="data-value",as=(t,a,r)=>ts(t,a,r),Pt=i.createContext(void 0),xe=()=>i.useContext(Pt),Mt=i.createContext(void 0),Ye=()=>i.useContext(Mt),Ot=i.createContext(void 0),Ft=i.forwardRef((t,a)=>{let r=oe(()=>{var m,E;return{search:"",value:(E=(m=t.value)!=null?m:t.defaultValue)!=null?E:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),o=oe(()=>new Set),s=oe(()=>new Map),n=oe(()=>new Map),l=oe(()=>new Set),d=Dt(t),{label:p,children:c,value:f,onValueChange:h,filter:x,shouldFilter:v,loop:S,disablePointerSelection:w=!1,vimBindings:y=!0,...b}=t,j=J(),C=J(),u=J(),g=i.useRef(null),_=fs();re(()=>{if(f!==void 0){let m=f.trim();r.current.value=m,P.emit()}},[f]),re(()=>{_(6,V)},[]);let P=i.useMemo(()=>({subscribe:m=>(l.current.add(m),()=>l.current.delete(m)),snapshot:()=>r.current,setState:(m,E,A)=>{var N,I,k,U;if(!Object.is(r.current[m],E)){if(r.current[m]=E,m==="search")M(),B(),_(1,R);else if(m==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let D=document.getElementById(u);D?D.focus():(N=document.getElementById(j))==null||N.focus()}if(_(7,()=>{var D;r.current.selectedItemId=(D=$())==null?void 0:D.id,P.emit()}),A||_(5,V),((I=d.current)==null?void 0:I.value)!==void 0){let D=E??"";(U=(k=d.current).onValueChange)==null||U.call(k,D);return}}P.emit()}},emit:()=>{l.current.forEach(m=>m())}}),[]),T=i.useMemo(()=>({value:(m,E,A)=>{var N;E!==((N=n.current.get(m))==null?void 0:N.value)&&(n.current.set(m,{value:E,keywords:A}),r.current.filtered.items.set(m,K(E,A)),_(2,()=>{B(),P.emit()}))},item:(m,E)=>(o.current.add(m),E&&(s.current.has(E)?s.current.get(E).add(m):s.current.set(E,new Set([m]))),_(3,()=>{M(),B(),r.current.value||R(),P.emit()}),()=>{n.current.delete(m),o.current.delete(m),r.current.filtered.items.delete(m);let A=$();_(4,()=>{M(),(A==null?void 0:A.getAttribute("id"))===m&&R(),P.emit()})}),group:m=>(s.current.has(m)||s.current.set(m,new Set),()=>{n.current.delete(m),s.current.delete(m)}),filter:()=>d.current.shouldFilter,label:p||t["aria-label"],getDisablePointerSelection:()=>d.current.disablePointerSelection,listId:j,inputId:u,labelId:C,listInnerRef:g}),[]);function K(m,E){var A,N;let I=(N=(A=d.current)==null?void 0:A.filter)!=null?N:as;return m?I(m,r.current.search,E):0}function B(){if(!r.current.search||d.current.shouldFilter===!1)return;let m=r.current.filtered.items,E=[];r.current.filtered.groups.forEach(N=>{let I=s.current.get(N),k=0;I.forEach(U=>{let D=m.get(U);k=Math.max(D,k)}),E.push([N,k])});let A=g.current;H().sort((N,I)=>{var k,U;let D=N.getAttribute("id"),be=I.getAttribute("id");return((k=m.get(be))!=null?k:0)-((U=m.get(D))!=null?U:0)}).forEach(N=>{let I=N.closest(Me);I?I.appendChild(N.parentElement===I?N:N.closest(`${Me} > *`)):A.appendChild(N.parentElement===A?N:N.closest(`${Me} > *`))}),E.sort((N,I)=>I[1]-N[1]).forEach(N=>{var I;let k=(I=g.current)==null?void 0:I.querySelector(`${pe}[${ne}="${encodeURIComponent(N[0])}"]`);k==null||k.parentElement.appendChild(k)})}function R(){let m=H().find(A=>A.getAttribute("aria-disabled")!=="true"),E=m==null?void 0:m.getAttribute(ne);P.setState("value",E||void 0)}function M(){var m,E,A,N;if(!r.current.search||d.current.shouldFilter===!1){r.current.filtered.count=o.current.size;return}r.current.filtered.groups=new Set;let I=0;for(let k of o.current){let U=(E=(m=n.current.get(k))==null?void 0:m.value)!=null?E:"",D=(N=(A=n.current.get(k))==null?void 0:A.keywords)!=null?N:[],be=K(U,D);r.current.filtered.items.set(k,be),be>0&&I++}for(let[k,U]of s.current)for(let D of U)if(r.current.filtered.items.get(D)>0){r.current.filtered.groups.add(k);break}r.current.filtered.count=I}function V(){var m,E,A;let N=$();N&&(((m=N.parentElement)==null?void 0:m.firstChild)===N&&((A=(E=N.closest(pe))==null?void 0:E.querySelector(rs))==null||A.scrollIntoView({block:"nearest"})),N.scrollIntoView({block:"nearest"}))}function $(){var m;return(m=g.current)==null?void 0:m.querySelector(`${kt}[aria-selected="true"]`)}function H(){var m;return Array.from(((m=g.current)==null?void 0:m.querySelectorAll(pt))||[])}function L(m){let E=H()[m];E&&P.setState("value",E.getAttribute(ne))}function se(m){var E;let A=$(),N=H(),I=N.findIndex(U=>U===A),k=N[I+m];(E=d.current)!=null&&E.loop&&(k=I+m<0?N[N.length-1]:I+m===N.length?N[0]:N[I+m]),k&&P.setState("value",k.getAttribute(ne))}function de(m){let E=$(),A=E==null?void 0:E.closest(pe),N;for(;A&&!N;)A=m>0?ps(A,pe):ms(A,pe),N=A==null?void 0:A.querySelector(pt);N?P.setState("value",N.getAttribute(ne)):se(m)}let nt=()=>L(H().length-1),ot=m=>{m.preventDefault(),m.metaKey?nt():m.altKey?de(1):se(1)},lt=m=>{m.preventDefault(),m.metaKey?L(0):m.altKey?de(-1):se(-1)};return i.createElement(O.div,{ref:a,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:m=>{var E;(E=b.onKeyDown)==null||E.call(b,m);let A=m.nativeEvent.isComposing||m.keyCode===229;if(!(m.defaultPrevented||A))switch(m.key){case"n":case"j":{y&&m.ctrlKey&&ot(m);break}case"ArrowDown":{ot(m);break}case"p":case"k":{y&&m.ctrlKey&&lt(m);break}case"ArrowUp":{lt(m);break}case"Home":{m.preventDefault(),L(0);break}case"End":{m.preventDefault(),nt();break}case"Enter":{m.preventDefault();let N=$();if(N){let I=new Event(qe);N.dispatchEvent(I)}}}}},i.createElement("label",{"cmdk-label":"",htmlFor:T.inputId,id:T.labelId,style:vs},p),Ce(t,m=>i.createElement(Mt.Provider,{value:P},i.createElement(Pt.Provider,{value:T},m))))}),ss=i.forwardRef((t,a)=>{var r,o;let s=J(),n=i.useRef(null),l=i.useContext(Ot),d=xe(),p=Dt(t),c=(o=(r=p.current)==null?void 0:r.forceMount)!=null?o:l==null?void 0:l.forceMount;re(()=>{if(!c)return d.item(s,l==null?void 0:l.id)},[c]);let f=Lt(s,n,[t.value,t.children,n],t.keywords),h=Ye(),x=te(_=>_.value&&_.value===f.current),v=te(_=>c||d.filter()===!1?!0:_.search?_.filtered.items.get(s)>0:!0);i.useEffect(()=>{let _=n.current;if(!(!_||t.disabled))return _.addEventListener(qe,S),()=>_.removeEventListener(qe,S)},[v,t.onSelect,t.disabled]);function S(){var _,P;w(),(P=(_=p.current).onSelect)==null||P.call(_,f.current)}function w(){h.setState("value",f.current,!0)}if(!v)return null;let{disabled:y,value:b,onSelect:j,forceMount:C,keywords:u,...g}=t;return i.createElement(O.div,{ref:me(n,a),...g,id:s,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!x,"data-disabled":!!y,"data-selected":!!x,onPointerMove:y||d.getDisablePointerSelection()?void 0:w,onClick:y?void 0:S},t.children)}),ns=i.forwardRef((t,a)=>{let{heading:r,children:o,forceMount:s,...n}=t,l=J(),d=i.useRef(null),p=i.useRef(null),c=J(),f=xe(),h=te(v=>s||f.filter()===!1?!0:v.search?v.filtered.groups.has(l):!0);re(()=>f.group(l),[]),Lt(l,d,[t.value,t.heading,p]);let x=i.useMemo(()=>({id:l,forceMount:s}),[s]);return i.createElement(O.div,{ref:me(d,a),...n,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},r&&i.createElement("div",{ref:p,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),Ce(t,v=>i.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},i.createElement(Ot.Provider,{value:x},v))))}),os=i.forwardRef((t,a)=>{let{alwaysRender:r,...o}=t,s=i.useRef(null),n=te(l=>!l.search);return!r&&!n?null:i.createElement(O.div,{ref:me(s,a),...o,"cmdk-separator":"",role:"separator"})}),ls=i.forwardRef((t,a)=>{let{onValueChange:r,...o}=t,s=t.value!=null,n=Ye(),l=te(c=>c.search),d=te(c=>c.selectedItemId),p=xe();return i.useEffect(()=>{t.value!=null&&n.setState("search",t.value)},[t.value]),i.createElement(O.input,{ref:a,...o,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":p.listId,"aria-labelledby":p.labelId,"aria-activedescendant":d,id:p.inputId,type:"text",value:s?t.value:l,onChange:c=>{s||n.setState("search",c.target.value),r==null||r(c.target.value)}})}),is=i.forwardRef((t,a)=>{let{children:r,label:o="Suggestions",...s}=t,n=i.useRef(null),l=i.useRef(null),d=te(c=>c.selectedItemId),p=xe();return i.useEffect(()=>{if(l.current&&n.current){let c=l.current,f=n.current,h,x=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let v=c.offsetHeight;f.style.setProperty("--cmdk-list-height",v.toFixed(1)+"px")})});return x.observe(c),()=>{cancelAnimationFrame(h),x.unobserve(c)}}},[]),i.createElement(O.div,{ref:me(n,a),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":d,"aria-label":o,id:p.listId},Ce(t,c=>i.createElement("div",{ref:me(l,p.listInnerRef),"cmdk-list-sizer":""},c)))}),cs=i.forwardRef((t,a)=>{let{open:r,onOpenChange:o,overlayClassName:s,contentClassName:n,container:l,...d}=t;return i.createElement(Cr,{open:r,onOpenChange:o},i.createElement(wr,{container:l},i.createElement(Ar,{"cmdk-overlay":"",className:s}),i.createElement(_r,{"aria-label":t.label,"cmdk-dialog":"",className:n},i.createElement(Ft,{ref:a,...d}))))}),ds=i.forwardRef((t,a)=>te(r=>r.filtered.count===0)?i.createElement(O.div,{ref:a,...t,"cmdk-empty":"",role:"presentation"}):null),us=i.forwardRef((t,a)=>{let{progress:r,children:o,label:s="Loading...",...n}=t;return i.createElement(O.div,{ref:a,...n,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Ce(t,l=>i.createElement("div",{"aria-hidden":!0},l)))}),ce=Object.assign(Ft,{List:is,Item:ss,Input:ls,Group:ns,Separator:os,Dialog:cs,Empty:ds,Loading:us});function ps(t,a){let r=t.nextElementSibling;for(;r;){if(r.matches(a))return r;r=r.nextElementSibling}}function ms(t,a){let r=t.previousElementSibling;for(;r;){if(r.matches(a))return r;r=r.previousElementSibling}}function Dt(t){let a=i.useRef(t);return re(()=>{a.current=t}),a}var re=typeof window>"u"?i.useEffect:i.useLayoutEffect;function oe(t){let a=i.useRef();return a.current===void 0&&(a.current=t()),a}function te(t){let a=Ye(),r=()=>t(a.snapshot());return i.useSyncExternalStore(a.subscribe,r,r)}function Lt(t,a,r,o=[]){let s=i.useRef(),n=xe();return re(()=>{var l;let d=(()=>{var c;for(let f of r){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(c=f.current.textContent)==null?void 0:c.trim():s.current}})(),p=o.map(c=>c.trim());n.value(t,d,p),(l=a.current)==null||l.setAttribute(ne,d),s.current=d}),s}var fs=()=>{let[t,a]=i.useState(),r=oe(()=>new Map);return re(()=>{r.current.forEach(o=>o()),r.current=new Map},[t]),(o,s)=>{r.current.set(o,s),a({})}};function hs(t){let a=t.type;return typeof a=="function"?a(t.props):"render"in a?a.render(t.props):t}function Ce({asChild:t,children:a},r){return t&&i.isValidElement(a)?i.cloneElement(hs(a),{ref:a.ref},r(a.props.children)):r(a)}var vs={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function xs({className:t,...a}){return e.jsx(ce,{"data-slot":"command",className:z("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...a})}function gs({className:t,...a}){return e.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[e.jsx(ia,{className:"size-4 shrink-0 opacity-50"}),e.jsx(ce.Input,{"data-slot":"command-input",className:z("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...a})]})}function bs({className:t,...a}){return e.jsx(ce.List,{"data-slot":"command-list",className:z("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...a})}function js({...t}){return e.jsx(ce.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function ys({className:t,...a}){return e.jsx(ce.Group,{"data-slot":"command-group",className:z("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...a})}function Ns({className:t,...a}){return e.jsx(ce.Item,{"data-slot":"command-item",className:z("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}const Ne=({id:t,options:a,placeholder:r,value:o,onChange:s,disabled:n=!1})=>{var h;const[l,d]=i.useState(!1),p=o??"",c=x=>{n||(p===x.value?s(""):s(x.value,x.label),d(!1))},f=[...a];return p&&f.sort((x,v)=>x.value===p?-1:v.value===p?1:0),e.jsx(e.Fragment,{children:e.jsxs(na,{open:l,onOpenChange:x=>!n&&d(x),modal:!0,children:[e.jsx(oa,{asChild:!0,children:e.jsxs("div",{id:t,role:"combobox","aria-expanded":l,"aria-disabled":n,className:z("border rounded-md flex items-center justify-between","py-2 px-2 text-left whitespace-pre-wrap break-words",p?"":"text-muted-foreground",n?"bg-muted cursor-not-allowed opacity-60":"cursor-pointer"),onClick:()=>{n||d(!l)},tabIndex:n?-1:0,children:[e.jsx("span",{className:"flex-1 text-sm",children:p&&((h=a.find(x=>x.value===p))==null?void 0:h.label)||r}),e.jsx(Ra,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(la,{className:"p-0",side:"bottom",align:"start",sideOffset:4,avoidCollisions:!0,style:{width:"var(--radix-popper-anchor-width)"},children:e.jsxs(xs,{children:[e.jsx(gs,{placeholder:"Search options..."}),e.jsxs(bs,{children:[e.jsx(js,{children:"Not found."}),e.jsx(ys,{children:f.map(x=>e.jsxs(Ns,{value:x.value,onSelect:()=>c(x),keywords:[x.label,x.description||""],children:[e.jsx(Ct,{checked:p===x.value,onCheckedChange:()=>c(x),className:"mr-2"}),e.jsxs("div",{className:"flex flex-col",children:[x.label,x.description&&e.jsx("span",{className:"text-xs text-muted-foreground",children:x.description})]})]},x.value))})]})]})})]})})},Vt=({steps:t,activeStep:a,onStepChange:r,showFutureSteps:o=!0})=>e.jsx("div",{className:"relative","aria-label":"Stepper",children:t.map((s,n)=>!o&&n>a?null:e.jsxs(F.Fragment,{children:[e.jsxs("div",{className:"flex flex-row items-start relative",children:[n<t.length-1&&e.jsx("div",{className:"absolute left-4 top-12 w-0.5 bg-accent",style:{height:"calc(100% - 2rem)",zIndex:0}}),e.jsx("button",{className:"relative z-10 mt-0 focus:outline-none ml-0 mr-8",style:{pointerEvents:n>a?"none":"auto"},onClick:()=>r&&r(n),"aria-current":n===a?"step":void 0,children:e.jsx("span",{className:`flex items-center justify-center w-8 h-8 rounded-full border-2 transition-colors duration-200
                    ${a>=n&&s.status==="error"?"bg-red-100 border-red-500 text-red-500":a>=n&&s.status==="completed"?"bg-primary-2 border-primary-2 text-primary-2":n===a?"bg-primary border-primary text-foreground shadow-lg":n<a?"bg-primary-2 border-primary-2 text-primary-2":"bg-background border-muted-foreground text-muted-foreground"}
                  `,children:a>=n&&s.status==="error"?e.jsx(Ir,{className:"text-red-500",size:20}):a>=n&&s.status==="completed"?e.jsx(Ke,{className:"text-white",size:20}):n===a?e.jsx("span",{className:"w-3 h-3 rounded-full bg-background"}):n<a?e.jsx(Ke,{className:"text-white",size:20}):e.jsx("span",{className:"font-bold",children:n+1})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:`uppercase font-light text-primary
                  ${a>=n&&s.status==="error"?"text-red-500":a>=n&&s.status==="completed"?"text-primary-2":n===a?"":n<a?"text-primary-2":"bg-background border-muted-foreground text-muted-foreground"}
                  `,children:s.label}),s.description&&e.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:s.description}),s.content&&e.jsx("div",{children:s.content})]})]}),n<t.length-1&&e.jsxs("div",{className:"flex flex-row items-start",children:[e.jsx("div",{style:{width:40}}),e.jsx("div",{className:"flex-1 min-w-[24rem] mb-8"})]})]},s.label))}),Ss=({trigger:t,projectId:a})=>{const[r,o]=i.useState(!1),{invalidateJobQueries:s}=da(),{viewJob:n}=ua(),l={activeStep:0,projectAction:{value:"",label:""},projectPlatform:{value:"",label:""},projectType:{value:"",label:""},autoRelease:!1};function d(u,g){switch(g.type){case"SET_ACTION":return{...u,projectAction:{value:g.value,label:g.label},projectPlatform:{value:"",label:""},projectType:{value:"",label:""},activeStep:g.value!==""?1:0};case"SET_PLATFORM":return{...u,projectPlatform:{value:g.value,label:g.label},projectType:{value:"",label:""},activeStep:g.value!==""?2:1};case"SET_TYPE":return{...u,projectType:{value:g.value,label:g.label},activeStep:g.value?3:2};case"SET_ACTIVE_STEP":return{...u,activeStep:g.value};case"SET_AUTO_RELEASE":return{...u,autoRelease:g.value};default:return u}}const[p,c]=i.useReducer(d,l),f=Se({...Rr(),onSuccess:u=>{s(),ee.success("Project action submitted successfully",{description:e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{size:"sm",className:"flex-1",onClick:()=>n(u.id),children:"View Job"}),e.jsx(G,{size:"sm",variant:"secondary",className:"flex-1",onClick:()=>ee.dismiss(),children:"Dismiss"})]})})}),o(!1),h()},onError:u=>{ee.error("Failed to submit pipeline job",{description:e.jsx("span",{className:"text-sm text-foreground",children:u.message||"An unexpected error occurred"})})}}),h=()=>{c({type:"SET_ACTION",value:"",label:""}),c({type:"SET_ACTIVE_STEP",value:0}),c({type:"SET_AUTO_RELEASE",value:!1})},x=u=>{u||h()},{data:v}=ye(Tr()),S=i.useMemo(()=>(v??[]).map(u=>({value:u.value,label:u.label,description:u.description})),[v]),{data:w}=ye(kr()),y=i.useMemo(()=>(w??[]).map(u=>({value:u.value,label:u.label,description:u.description})),[w]),{data:b,isFetching:j}=ye({...Pr({query:{action:p.projectAction.value,platform:p.projectPlatform.value}}),enabled:!!p.projectAction.value&&!!p.projectPlatform.value}),C=i.useMemo(()=>b?b.map(u=>({value:u.label,label:u.label,description:u.description})):[],[b]);return e.jsxs(ht,{open:r,onOpenChange:u=>{o(u),x(u)},children:[e.jsx(vt,{asChild:!0,onClick:()=>o(!0),children:t}),e.jsxs(xt,{side:"right",className:"w-full sm:max-w-2xl overflow-y-auto",children:[e.jsxs(gt,{children:[e.jsx(bt,{children:"Execute Action"}),e.jsx(jt,{children:"Execute pipelines and actions on this project"}),e.jsx("div",{className:"flex flex-col gap-12 mt-6",children:e.jsx(Vt,{activeStep:p.activeStep,showFutureSteps:!0,steps:[{label:"Choose Action",description:"Which action would you like to perform?",content:e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col flex-1",children:e.jsx(Ne,{id:"projectAction",options:S,placeholder:"Select project action",value:p.projectAction.value,onChange:(u,g)=>c({type:"SET_ACTION",value:u,label:g})})})})},{label:"Select Platform",description:"Which platform should execute this action?",content:e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col flex-1",children:e.jsx(Ne,{id:"projectPlatform",options:y,placeholder:"Select project platform",value:p.projectPlatform.value,disabled:!p.projectAction.value,onChange:(u,g)=>c({type:"SET_PLATFORM",value:u,label:g})})})})},{label:"Project Type",description:"What type of project is this?",content:e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col flex-1 gap-4",children:j?e.jsxs("div",{className:"flex items-center gap-2 border rounded-md py-2 px-2 text-sm text-muted-foreground",children:[e.jsx($e,{variant:"circle",size:16}),e.jsx("span",{children:"Loading project types..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{id:"projectType",options:C,placeholder:"Select project type",value:p.projectType.value,disabled:!p.projectPlatform.value,onChange:(u,g)=>c({type:"SET_TYPE",value:u,label:g})}),p.projectAction.value==="export-project-results"&&p.projectType.value&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"autoRelease",checked:p.autoRelease,onCheckedChange:u=>c({type:"SET_AUTO_RELEASE",value:u})}),e.jsx(fe,{htmlFor:"autoRelease",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Auto-release Xpress Project"})]})]})})})}]})})]}),e.jsxs(yt,{children:[e.jsxs(G,{variant:"default",disabled:!p.projectType.value||f.isPending,className:"flex items-center gap-2 w-full sm:w-auto",onClick:()=>{const u=(p.projectType.label||p.projectType.value).split(":")[0].trim(),g=p.projectType.label||p.projectType.value;console.log("Submitting pipeline job with:",{action:p.projectAction.value,platform:p.projectPlatform.value,project_type:u,reference:g,auto_release:p.autoRelease}),f.mutate({path:{project_id:a},body:{action:p.projectAction.value,platform:p.projectPlatform.value,project_type:u,reference:g,auto_release:p.autoRelease}})},children:[f.isPending?e.jsx($e,{variant:"circle",size:16}):e.jsx(wt,{}),e.jsx("span",{children:f.isPending?"Submitting...":"Execute"})]}),e.jsx(Nt,{asChild:!0,children:e.jsx(G,{variant:"secondary",onClick:h,children:"Close"})})]})]})]})},Es=({response:t,isValidating:a=!1})=>a?e.jsxs("div",{className:"flex items-center justify-center gap-3 p-8",children:[e.jsx($e,{variant:"circle",size:24}),e.jsx("span",{className:"text-muted-foreground",children:"Validating manifest..."})]}):t?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(W,{className:`p-4 rounded-lg border-none shadow-none ${t.valid?"bg-green-50":"bg-red-50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[t.valid?e.jsx(pa,{className:"w-6 h-6 text-green-600 flex-shrink-0"}):e.jsx(ma,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),e.jsx("span",{className:`font-semibold text-base ${t.valid?"text-green-900":"text-red-900"}`,children:t.valid?"Manifest is valid":"Manifest is invalid"})]})}),t.message&&Object.keys(t.message).length>0&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Messages"}),e.jsx("div",{className:"bg-muted p-3 rounded-md text-sm space-y-1",children:Object.entries(t.message).map(([r,o])=>e.jsxs("div",{className:"text-muted-foreground",children:[e.jsxs("span",{className:"font-medium",children:[r,":"]})," ",o]},r))})]}),t.error&&Object.keys(t.error).length>0&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h4",{className:"font-semibold text-sm text-red-600",children:"Errors"}),e.jsx("div",{className:"bg-red-50 p-3 rounded-md text-sm space-y-2",children:Object.entries(t.error).map(([r,o])=>e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-red-700",children:r}),e.jsx("ul",{className:"list-disc list-inside ml-2 text-red-600",children:o.map((s,n)=>e.jsx("li",{children:s},n))})]},r))})]}),t.warning&&Object.keys(t.warning).length>0&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h4",{className:"font-semibold text-sm text-yellow-600",children:"Warnings"}),e.jsx("div",{className:"bg-yellow-50 p-3 rounded-md text-sm space-y-2",children:Object.entries(t.warning).map(([r,o])=>e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-yellow-700",children:r}),e.jsx("ul",{className:"list-disc list-inside ml-2 text-yellow-600",children:o.map((s,n)=>e.jsx("li",{children:s},n))})]},r))})]})]}):e.jsx("div",{className:"text-muted-foreground",children:"No validation response available"});function Y(t,a,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return a==null?void 0:a(s)}}var Oe="rovingFocusGroup.onEntryFocus",Cs={bubbles:!1,cancelable:!0},ge="RovingFocusGroup",[He,$t,ws]=_t(ge),[As,Ut]=he(ge,[ws]),[_s,Is]=As(ge),Gt=i.forwardRef((t,a)=>e.jsx(He.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(He.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Rs,{...t,ref:a})})}));Gt.displayName=ge;var Rs=i.forwardRef((t,a)=>{const{__scopeRovingFocusGroup:r,orientation:o,loop:s=!1,dir:n,currentTabStopId:l,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:p,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...h}=t,x=i.useRef(null),v=ae(a,x),S=Je(n),[w,y]=ve({prop:l,defaultProp:d??null,onChange:p,caller:ge}),[b,j]=i.useState(!1),C=Mr(c),u=$t(r),g=i.useRef(!1),[_,P]=i.useState(0);return i.useEffect(()=>{const T=x.current;if(T)return T.addEventListener(Oe,C),()=>T.removeEventListener(Oe,C)},[C]),e.jsx(_s,{scope:r,orientation:o,dir:S,loop:s,currentTabStopId:w,onItemFocus:i.useCallback(T=>y(T),[y]),onItemShiftTab:i.useCallback(()=>j(!0),[]),onFocusableItemAdd:i.useCallback(()=>P(T=>T+1),[]),onFocusableItemRemove:i.useCallback(()=>P(T=>T-1),[]),children:e.jsx(O.div,{tabIndex:b||_===0?-1:0,"data-orientation":o,...h,ref:v,style:{outline:"none",...t.style},onMouseDown:Y(t.onMouseDown,()=>{g.current=!0}),onFocus:Y(t.onFocus,T=>{const K=!g.current;if(T.target===T.currentTarget&&K&&!b){const B=new CustomEvent(Oe,Cs);if(T.currentTarget.dispatchEvent(B),!B.defaultPrevented){const R=u().filter(L=>L.focusable),M=R.find(L=>L.active),V=R.find(L=>L.id===w),H=[M,V,...R].filter(Boolean).map(L=>L.ref.current);zt(H,f)}}g.current=!1}),onBlur:Y(t.onBlur,()=>j(!1))})})}),Bt="RovingFocusGroupItem",Kt=i.forwardRef((t,a)=>{const{__scopeRovingFocusGroup:r,focusable:o=!0,active:s=!1,tabStopId:n,children:l,...d}=t,p=J(),c=n||p,f=Is(Bt,r),h=f.currentTabStopId===c,x=$t(r),{onFocusableItemAdd:v,onFocusableItemRemove:S,currentTabStopId:w}=f;return i.useEffect(()=>{if(o)return v(),()=>S()},[o,v,S]),e.jsx(He.ItemSlot,{scope:r,id:c,focusable:o,active:s,children:e.jsx(O.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...d,ref:a,onMouseDown:Y(t.onMouseDown,y=>{o?f.onItemFocus(c):y.preventDefault()}),onFocus:Y(t.onFocus,()=>f.onItemFocus(c)),onKeyDown:Y(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){f.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const b=Ps(y,f.orientation,f.dir);if(b!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let C=x().filter(u=>u.focusable).map(u=>u.ref.current);if(b==="last")C.reverse();else if(b==="prev"||b==="next"){b==="prev"&&C.reverse();const u=C.indexOf(y.currentTarget);C=f.loop?Ms(C,u+1):C.slice(u+1)}setTimeout(()=>zt(C))}}),children:typeof l=="function"?l({isCurrentTabStop:h,hasTabStop:w!=null}):l})})});Kt.displayName=Bt;var Ts={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ks(t,a){return a!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Ps(t,a,r){const o=ks(t.key,r);if(!(a==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(a==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Ts[o]}function zt(t,a=!1){const r=document.activeElement;for(const o of t)if(o===r||(o.focus({preventScroll:a}),document.activeElement!==r))return}function Ms(t,a){return t.map((r,o)=>t[(a+o)%t.length])}var Os=Gt,Fs=Kt;function Ds(t,a){return i.useReducer((r,o)=>a[r][o]??r,t)}var qt=t=>{const{present:a,children:r}=t,o=Ls(a),s=typeof r=="function"?r({present:o.isPresent}):i.Children.only(r),n=ae(o.ref,Vs(s));return typeof r=="function"||o.isPresent?i.cloneElement(s,{ref:n}):null};qt.displayName="Presence";function Ls(t){const[a,r]=i.useState(),o=i.useRef(null),s=i.useRef(t),n=i.useRef("none"),l=t?"mounted":"unmounted",[d,p]=Ds(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const c=je(o.current);n.current=d==="mounted"?c:"none"},[d]),Ue(()=>{const c=o.current,f=s.current;if(f!==t){const x=n.current,v=je(c);t?p("MOUNT"):v==="none"||(c==null?void 0:c.display)==="none"?p("UNMOUNT"):p(f&&x!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,p]),Ue(()=>{if(a){let c;const f=a.ownerDocument.defaultView??window,h=v=>{const w=je(o.current).includes(CSS.escape(v.animationName));if(v.target===a&&w&&(p("ANIMATION_END"),!s.current)){const y=a.style.animationFillMode;a.style.animationFillMode="forwards",c=f.setTimeout(()=>{a.style.animationFillMode==="forwards"&&(a.style.animationFillMode=y)})}},x=v=>{v.target===a&&(n.current=je(o.current))};return a.addEventListener("animationstart",x),a.addEventListener("animationcancel",h),a.addEventListener("animationend",h),()=>{f.clearTimeout(c),a.removeEventListener("animationstart",x),a.removeEventListener("animationcancel",h),a.removeEventListener("animationend",h)}}else p("ANIMATION_END")},[a,p]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:i.useCallback(c=>{o.current=c?getComputedStyle(c):null,r(c)},[])}}function je(t){return(t==null?void 0:t.animationName)||"none"}function Vs(t){var o,s;let a=(o=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:o.get,r=a&&"isReactWarning"in a&&a.isReactWarning;return r?t.ref:(a=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=a&&"isReactWarning"in a&&a.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Xe="Radio",[$s,Ht]=he(Xe),[Us,Gs]=$s(Xe),Qt=i.forwardRef((t,a)=>{const{__scopeRadio:r,name:o,checked:s=!1,required:n,disabled:l,value:d="on",onCheck:p,form:c,...f}=t,[h,x]=i.useState(null),v=ae(a,y=>x(y)),S=i.useRef(!1),w=h?c||!!h.closest("form"):!0;return e.jsxs(Us,{scope:r,checked:s,disabled:l,children:[e.jsx(O.button,{type:"button",role:"radio","aria-checked":s,"data-state":Xt(s),"data-disabled":l?"":void 0,disabled:l,value:d,...f,ref:v,onClick:Y(t.onClick,y=>{s||p==null||p(),w&&(S.current=y.isPropagationStopped(),S.current||y.stopPropagation())})}),w&&e.jsx(Yt,{control:h,bubbles:!S.current,name:o,value:d,checked:s,required:n,disabled:l,form:c,style:{transform:"translateX(-100%)"}})]})});Qt.displayName=Xe;var Wt="RadioIndicator",Jt=i.forwardRef((t,a)=>{const{__scopeRadio:r,forceMount:o,...s}=t,n=Gs(Wt,r);return e.jsx(qt,{present:o||n.checked,children:e.jsx(O.span,{"data-state":Xt(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:a})})});Jt.displayName=Wt;var Bs="RadioBubbleInput",Yt=i.forwardRef(({__scopeRadio:t,control:a,checked:r,bubbles:o=!0,...s},n)=>{const l=i.useRef(null),d=ae(l,n),p=fa(r),c=Or(a);return i.useEffect(()=>{const f=l.current;if(!f)return;const h=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(h,"checked").set;if(p!==r&&v){const S=new Event("click",{bubbles:o});v.call(f,r),f.dispatchEvent(S)}},[p,r,o]),e.jsx(O.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:d,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Yt.displayName=Bs;function Xt(t){return t?"checked":"unchecked"}var Ks=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],we="RadioGroup",[zs,Xn]=he(we,[Ut,Ht]),Zt=Ut(),er=Ht(),[qs,Hs]=zs(we),tr=i.forwardRef((t,a)=>{const{__scopeRadioGroup:r,name:o,defaultValue:s,value:n,required:l=!1,disabled:d=!1,orientation:p,dir:c,loop:f=!0,onValueChange:h,...x}=t,v=Zt(r),S=Je(c),[w,y]=ve({prop:n,defaultProp:s??null,onChange:h,caller:we});return e.jsx(qs,{scope:r,name:o,required:l,disabled:d,value:w,onValueChange:y,children:e.jsx(Os,{asChild:!0,...v,orientation:p,dir:S,loop:f,children:e.jsx(O.div,{role:"radiogroup","aria-required":l,"aria-orientation":p,"data-disabled":d?"":void 0,dir:S,...x,ref:a})})})});tr.displayName=we;var rr="RadioGroupItem",ar=i.forwardRef((t,a)=>{const{__scopeRadioGroup:r,disabled:o,...s}=t,n=Hs(rr,r),l=n.disabled||o,d=Zt(r),p=er(r),c=i.useRef(null),f=ae(a,c),h=n.value===s.value,x=i.useRef(!1);return i.useEffect(()=>{const v=w=>{Ks.includes(w.key)&&(x.current=!0)},S=()=>x.current=!1;return document.addEventListener("keydown",v),document.addEventListener("keyup",S),()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",S)}},[]),e.jsx(Fs,{asChild:!0,...d,focusable:!l,active:h,children:e.jsx(Qt,{disabled:l,required:n.required,checked:h,...p,...s,name:n.name,ref:f,onCheck:()=>n.onValueChange(s.value),onKeyDown:Y(v=>{v.key==="Enter"&&v.preventDefault()}),onFocus:Y(s.onFocus,()=>{var v;x.current&&((v=c.current)==null||v.click())})})})});ar.displayName=rr;var Qs="RadioGroupIndicator",sr=i.forwardRef((t,a)=>{const{__scopeRadioGroup:r,...o}=t,s=er(r);return e.jsx(Jt,{...s,...o,ref:a})});sr.displayName=Qs;var nr=tr,or=ar,Ws=sr;const lr=i.forwardRef(({className:t,...a},r)=>e.jsx(nr,{className:z("grid gap-2",t),...a,ref:r}));lr.displayName=nr.displayName;const Qe=i.forwardRef(({className:t,...a},r)=>e.jsx(or,{ref:r,className:z("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:e.jsx(Ws,{className:"flex items-center justify-center",children:e.jsx(ka,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Qe.displayName=or.displayName;function ir({queryKey:t,fetcher:a,perPage:r=100,staleTime:o=0,gcTime:s=0,enabled:n=!0}){return ye({queryKey:t,queryFn:async()=>{const l=[];let d=1,p=!0;for(;p;){const c=await a({query:{page:d,per_page:r}});c.data?(l.push(...c.data.data),p=c.data.has_next,d++):p=!1}return l},staleTime:o,gcTime:s,enabled:n})}const Js=({trigger:t,projectId:a})=>{var C;const[r,o]=i.useState(!1),s={selectedVendor:{value:"",label:""},selectedFile:"",validManifest:!1,activeStep:0,manifestOption:"existing",uploadedFile:"",latestManifestPath:null,isLoadingManifest:!1,manifestError:!1,validationResponse:null,ingested:!1};function n(u,g){switch(g.type){case"SET_VENDOR":return{...u,selectedVendor:{value:g.value,label:g.label},selectedFile:"",validManifest:!1,activeStep:g.value?1:0,latestManifestPath:null,uploadedFile:"",manifestError:!1,validationResponse:null};case"SET_FILE":return{...u,selectedFile:g.value,validManifest:!1,activeStep:g.value?2:1};case"SET_VALID_MANIFEST":return{...u,validManifest:g.value,activeStep:g.value?3:u.activeStep};case"SET_ACTIVE_STEP":return{...u,activeStep:g.value};case"SET_MANIFEST_OPTION":return{...u,manifestOption:g.value,uploadedFile:"",latestManifestPath:null,manifestError:!1,validationResponse:null};case"SET_UPLOADED_FILE":return{...u,uploadedFile:g.value};case"SET_LATEST_MANIFEST_PATH":return{...u,latestManifestPath:g.value};case"SET_IS_LOADING_MANIFEST":return{...u,isLoadingManifest:g.value};case"SET_MANIFEST_ERROR":return{...u,manifestError:g.value};case"SET_VALIDATION_RESPONSE":return{...u,validationResponse:g.value};case"SET_INGESTED":return{...u,ingested:g.value};default:return u}}const[l,d]=i.useReducer(n,s);i.useEffect(()=>{l.manifestOption==="existing"&&l.selectedVendor.value&&!l.latestManifestPath&&!l.isLoadingManifest&&(d({type:"SET_IS_LOADING_MANIFEST",value:!0}),Fr({query:{s3_path:`${l.selectedVendor.value}/${a}/`}}).then(u=>{u.status===204?(d({type:"SET_LATEST_MANIFEST_PATH",value:"There is no matching manifest file associated with this vendor"}),d({type:"SET_MANIFEST_ERROR",value:!0})):u.data&&(d({type:"SET_LATEST_MANIFEST_PATH",value:u.data}),d({type:"SET_MANIFEST_ERROR",value:!1})),d({type:"SET_IS_LOADING_MANIFEST",value:!1})}).catch(u=>{alert(`Error fetching latest manifest: ${u.message||"Unknown error"}`),d({type:"SET_MANIFEST_ERROR",value:!0}),d({type:"SET_IS_LOADING_MANIFEST",value:!1})}))},[l.manifestOption,l.selectedVendor.value,a,l.latestManifestPath,l.isLoadingManifest]);const p=St(),{mutate:c}=Se({...Dr(),onSuccess:u=>{p.invalidateQueries({queryKey:Lr({query:{s3_path:`${l.selectedVendor.value}/${a}/`}})}),d({type:"SET_UPLOADED_FILE",value:u.path}),ee.success("Manifest uploaded successfully")},onError:u=>{ee.error(`Error uploading manifest: ${u.message||"Unknown error"}`),console.error(u)}}),f=i.useCallback(u=>{if(u.length>0){const g=u[0],_=`${l.selectedVendor.value}/${a}/${g.name}`;c({query:{s3_path:_},body:{file:g}})}},[l.selectedVendor.value,a,c]),{mutate:h,isPending:x}=Se({...Vr(),onSuccess:u=>{d({type:"SET_VALIDATION_RESPONSE",value:u}),u.valid&&d({type:"SET_ACTIVE_STEP",value:3})},onError:u=>{ee.error(`Error uploading manifest: ${u.message||"Unknown error"}`),console.error(u)}}),v=()=>{d({type:"SET_VENDOR",value:"",label:""}),d({type:"SET_FILE",value:""}),d({type:"SET_VALID_MANIFEST",value:!1}),d({type:"SET_ACTIVE_STEP",value:0}),d({type:"SET_MANIFEST_OPTION",value:"existing"}),d({type:"SET_UPLOADED_FILE",value:""}),d({type:"SET_LATEST_MANIFEST_PATH",value:null}),d({type:"SET_IS_LOADING_MANIFEST",value:!1}),d({type:"SET_MANIFEST_ERROR",value:!1}),d({type:"SET_VALIDATION_RESPONSE",value:null}),d({type:"SET_INGESTED",value:!1})},S=u=>{u||v()},w=()=>{d({type:"SET_INGESTED",value:!0}),ee.success(`Successfully ingested data from ${l.selectedVendor.label} into project ${a}`),setTimeout(()=>{o(!1),setTimeout(()=>v(),300)},700)},{data:y,isLoading:b}=ir({queryKey:["vendors","all"],fetcher:$r,perPage:100}),j=(y==null?void 0:y.map(u=>({label:`${u.name} (${u.vendor_id})`,value:u.bucket||"",description:u.description})))??[];return e.jsxs(ht,{open:r,onOpenChange:u=>{o(u),S(u)},children:[e.jsx(vt,{asChild:!0,onClick:()=>o(!0),children:t}),e.jsxs(xt,{side:"right",className:"w-full sm:max-w-2xl overflow-y-auto",children:[e.jsxs(gt,{children:[e.jsx(bt,{children:"Ingest Vendor Data"}),e.jsx(jt,{children:"Validate and ingest data from vendor manifests into this project"}),e.jsx("div",{className:"flex flex-col gap-12 mt-6",children:e.jsx(Vt,{activeStep:l.activeStep,showFutureSteps:!0,steps:[{label:"Select Source",description:"Select source bucket where files described in the manifest are located",content:e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col gap-6",children:e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:gap-2",children:[e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx(Ne,{id:"vendorBucket",options:j,placeholder:b?"Loading vendors...":"Select source bucket",value:l.selectedVendor.value,onChange:(u,g)=>d({type:"SET_VENDOR",value:u,label:g}),disabled:b}),e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-muted-foreground mt-1 md:flex-row md:justify-end md:items-center",children:[e.jsx("span",{children:"Not seeing your vendor's bucket? "}),e.jsx(Ur,{to:"/admin/vendors",className:"text-primary hover:underline",children:"Add a vendor"})]})]}),e.jsxs(Gr,{children:[e.jsx(Be,{trigger:e.jsx(Br,{asChild:!0,children:e.jsxs(G,{variant:"outline",disabled:l.selectedVendor.value==="",className:"w-full md:w-auto",children:[e.jsx(Kr,{})," Browse"]})}),rootPath:`${l.selectedVendor.value}/${a}/`}),e.jsxs(zr,{children:["Browse ",l.selectedVendor.value]})]})]})})})})},{label:"Choose manifest",description:"Choose or upload a manifest file to validate",content:e.jsx(e.Fragment,{children:l.activeStep>=1&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(lr,{value:l.manifestOption,onValueChange:u=>{d({type:"SET_MANIFEST_OPTION",value:u}),d({type:"SET_ACTIVE_STEP",value:1})},className:"flex flex-col gap-4",children:[e.jsx(W,{className:`relative cursor-pointer ${l.manifestOption==="existing"?"border-primary ring-2 ring-primary ring-offset-2":""}`,children:e.jsx(le,{children:e.jsxs(fe,{htmlFor:"existing",className:"flex items-start gap-3 cursor-pointer",children:[e.jsx(Qe,{value:"existing",id:"existing",className:"mt-1"}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(X,{className:"text-base",children:"Use existing manifest"}),e.jsx(Z,{className:"text-xs",children:"Select a manifest file already in the vendor bucket"})]})]})})}),e.jsx(W,{className:`relative cursor-pointer ${l.manifestOption==="upload"?"border-primary ring-2 ring-primary ring-offset-2":""}`,children:e.jsx(le,{children:e.jsxs(fe,{htmlFor:"upload",className:"flex items-start gap-3 cursor-pointer",children:[e.jsx(Qe,{value:"upload",id:"upload",className:"mt-1"}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(X,{className:"text-base",children:"Upload new manifest"}),e.jsx(Z,{className:"text-xs",children:"Upload a new manifest file to the vendor bucket"})]})]})})})]}),l.manifestOption==="existing"?e.jsx("div",{className:"flex flex-col gap-2",children:l.isLoadingManifest?e.jsx(ie,{readOnly:!0,disabled:!0,value:"Loading latest manifest...",placeholder:"Fetching manifest..."}):e.jsx(ie,{readOnly:!0,value:l.latestManifestPath||""})}):e.jsx("div",{className:"flex flex-col gap-2",children:l.uploadedFile?e.jsx(ie,{readOnly:!0,value:l.uploadedFile}):e.jsx(At,{onDrop:f,displayComponent:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"font-semibold",children:"Drag or click to upload file"}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:`to ${l.selectedVendor.label} bucket`})]})})}),(l.manifestOption==="existing"&&l.latestManifestPath&&!l.manifestError||l.manifestOption==="upload"&&l.uploadedFile)&&e.jsxs(G,{onClick:()=>{h({query:{s3_path:l.manifestOption==="existing"?l.latestManifestPath:l.uploadedFile}}),d({type:"SET_ACTIVE_STEP",value:2})},disabled:x,className:"w-full",children:[e.jsx(Ke,{})," Validate"]})]})})},{label:"Review",description:"Review validation results",status:l.validationResponse?l.validationResponse.valid?"completed":"error":void 0,content:e.jsx(e.Fragment,{children:l.activeStep>=2&&e.jsx(Es,{response:l.validationResponse,isValidating:x})})},{label:"Ingest",description:"Ingest data & update manifest metadata",status:l.ingested?"completed":void 0}]})})]}),e.jsxs(yt,{children:[l.activeStep===3&&((C=l.validationResponse)==null?void 0:C.valid)&&e.jsxs(G,{onClick:w,className:"w-full md:w-auto",children:[e.jsx(Fa,{})," Ingest data & update manifest metadata"]}),e.jsx(Nt,{asChild:!0,children:e.jsx(G,{variant:"secondary",className:"w-full md:w-auto",onClick:v,children:"Close"})})]})]})]})},Ys=Et({key:Ge(),value:Ge()}).refine(t=>!(t.key.trim()===""&&t.value.trim()!==""),{message:"Key is required if value is filled.",path:["key"]}).refine(t=>!(t.key.trim()!==""&&t.value.trim()===""),{message:"Value is required if key is filled.",path:["value"]}),Xs=Et({name:Ge().nonempty(),attributes:Yr(Ys)}),Zs=({trigger:t,projectId:a,projectName:r,projectAttributes:o})=>{var P,T,K,B;const[s,n]=i.useState(!1),l=R=>{R||f(),n(R)},{register:d,control:p,handleSubmit:c,reset:f,setError:h,watch:x,formState:{errors:v,isSubmitting:S}}=va({defaultValues:{name:r||"",attributes:o&&o.length>0?o.map(R=>({key:R.key||"",value:R.value||""})):[{key:"",value:""}]},resolver:ca(Xs)}),{fields:w,append:y,remove:b}=xa({name:"attributes",control:p}),j=x("attributes"),C=St(),{mutate:u,isPending:g}=Se({...qr(),onError:R=>{var V,$;const M=(($=(V=R.response)==null?void 0:V.data.detail)==null?void 0:$.toString())||"An unknown error occurred.";h("root",{message:M})},onSuccess:R=>{f({name:R.name||"",attributes:R.attributes&&R.attributes.length>0?R.attributes.map(M=>({key:M.key||"",value:M.value||""})):[{key:"",value:""}]}),C.invalidateQueries({queryKey:Hr()}),C.invalidateQueries({queryKey:Qr({path:{project_id:a}})}),C.invalidateQueries({queryKey:Wr({path:{project_id:a}})}),ee.success(`Successfully updated project ${R.project_id}`),n(!1)}}),_=R=>{const M=R.attributes.filter(V=>!(V.key.trim()===""&&V.value.trim()===""));u({path:{project_id:a},body:{name:R.name,attributes:M}})};return e.jsx(e.Fragment,{children:e.jsxs(ga,{open:s,onOpenChange:l,children:[e.jsx(ba,{asChild:!0,children:t}),e.jsxs(ja,{children:[e.jsxs(ya,{children:[e.jsx(Na,{children:"Update Project"}),e.jsx(Sa,{children:"Update the project name and attributes."})]}),e.jsxs("form",{onSubmit:c(_),children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(fe,{htmlFor:"project-name",children:"Name"}),e.jsx(ie,{...d("name"),id:"project-name",type:"text",placeholder:"My Project",required:!0}),v.name&&e.jsx("div",{className:"text-xs text-red-500 text-left",children:v.name.message})]}),e.jsxs("div",{className:"grid gap-2 mb-6",children:[e.jsx(fe,{children:"Attributes"}),w.map((R,M)=>{var V,$,H,L,se,de;return e.jsx("div",{className:"grid gap-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx(ie,{...d(`attributes.${M}.key`),placeholder:"Key"}),((H=($=(V=v.attributes)==null?void 0:V[M])==null?void 0:$.key)==null?void 0:H.message)&&e.jsx("span",{className:"text-xs text-red-500 mt-1",children:v.attributes[M].key.message})]}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx(ie,{...d(`attributes.${M}.value`),placeholder:"Value"}),((de=(se=(L=v.attributes)==null?void 0:L[M])==null?void 0:se.value)==null?void 0:de.message)&&e.jsx("span",{className:"text-xs text-red-500 mt-1",children:v.attributes[M].value.message})]}),e.jsx(G,{variant:"ghost",className:"hover:bg-destructive/10 group",disabled:j.length<2,onClick:()=>b(M),children:e.jsx(wa,{className:"size-4 text-destructive"})})]})},R.id)}),e.jsx("div",{children:e.jsxs(G,{variant:"outline",type:"button",disabled:!((T=(P=j[j.length-1])==null?void 0:P.key)!=null&&T.trim())||!((B=(K=j[j.length-1])==null?void 0:K.value)!=null&&B.trim()),onClick:()=>y({key:"",value:""}),children:[e.jsx(It,{})," Add Attribute"]})})]}),v.root&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:v.root.message})]}),e.jsxs(Ea,{children:[e.jsx(Ca,{asChild:!0,children:e.jsx(G,{type:"button",variant:"secondary",onClick:()=>{f()},children:"Cancel"})}),e.jsxs(G,{disabled:S||g,type:"submit",children:[S||g?e.jsx(Jr,{className:"animate-spin h-4 w-4 text-white"}):null,S||g?"Updating Project...":"Update Project"]})]})]})]})]})})};var Ae="Collapsible",[en,cr]=he(Ae),[tn,Ze]=en(Ae),dr=i.forwardRef((t,a)=>{const{__scopeCollapsible:r,open:o,defaultOpen:s,disabled:n,onOpenChange:l,...d}=t,[p,c]=ve({prop:o,defaultProp:s??!1,onChange:l,caller:Ae});return e.jsx(tn,{scope:r,disabled:n,contentId:J(),open:p,onOpenToggle:i.useCallback(()=>c(f=>!f),[c]),children:e.jsx(O.div,{"data-state":tt(p),"data-disabled":n?"":void 0,...d,ref:a})})});dr.displayName=Ae;var ur="CollapsibleTrigger",pr=i.forwardRef((t,a)=>{const{__scopeCollapsible:r,...o}=t,s=Ze(ur,r);return e.jsx(O.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":tt(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...o,ref:a,onClick:Rt(t.onClick,s.onOpenToggle)})});pr.displayName=ur;var et="CollapsibleContent",mr=i.forwardRef((t,a)=>{const{forceMount:r,...o}=t,s=Ze(et,t.__scopeCollapsible);return e.jsx(ha,{present:r||s.open,children:({present:n})=>e.jsx(rn,{...o,ref:a,present:n})})});mr.displayName=et;var rn=i.forwardRef((t,a)=>{const{__scopeCollapsible:r,present:o,children:s,...n}=t,l=Ze(et,r),[d,p]=i.useState(o),c=i.useRef(null),f=ae(a,c),h=i.useRef(0),x=h.current,v=i.useRef(0),S=v.current,w=l.open||d,y=i.useRef(w),b=i.useRef(void 0);return i.useEffect(()=>{const j=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(j)},[]),Ue(()=>{const j=c.current;if(j){b.current=b.current||{transitionDuration:j.style.transitionDuration,animationName:j.style.animationName},j.style.transitionDuration="0s",j.style.animationName="none";const C=j.getBoundingClientRect();h.current=C.height,v.current=C.width,y.current||(j.style.transitionDuration=b.current.transitionDuration,j.style.animationName=b.current.animationName),p(o)}},[l.open,o]),e.jsx(O.div,{"data-state":tt(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!w,...n,ref:f,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":S?`${S}px`:void 0,...t.style},children:w&&s})});function tt(t){return t?"open":"closed"}var an=dr,sn=pr,nn=mr,q="Accordion",on=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[rt,ln,cn]=_t(q),[_e,Zn]=he(q,[cn,cr]),at=cr(),fr=F.forwardRef((t,a)=>{const{type:r,...o}=t,s=o,n=o;return e.jsx(rt.Provider,{scope:t.__scopeAccordion,children:r==="multiple"?e.jsx(mn,{...n,ref:a}):e.jsx(pn,{...s,ref:a})})});fr.displayName=q;var[hr,dn]=_e(q),[vr,un]=_e(q,{collapsible:!1}),pn=F.forwardRef((t,a)=>{const{value:r,defaultValue:o,onValueChange:s=()=>{},collapsible:n=!1,...l}=t,[d,p]=ve({prop:r,defaultProp:o??"",onChange:s,caller:q});return e.jsx(hr,{scope:t.__scopeAccordion,value:F.useMemo(()=>d?[d]:[],[d]),onItemOpen:p,onItemClose:F.useCallback(()=>n&&p(""),[n,p]),children:e.jsx(vr,{scope:t.__scopeAccordion,collapsible:n,children:e.jsx(xr,{...l,ref:a})})})}),mn=F.forwardRef((t,a)=>{const{value:r,defaultValue:o,onValueChange:s=()=>{},...n}=t,[l,d]=ve({prop:r,defaultProp:o??[],onChange:s,caller:q}),p=F.useCallback(f=>d((h=[])=>[...h,f]),[d]),c=F.useCallback(f=>d((h=[])=>h.filter(x=>x!==f)),[d]);return e.jsx(hr,{scope:t.__scopeAccordion,value:l,onItemOpen:p,onItemClose:c,children:e.jsx(vr,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(xr,{...n,ref:a})})})}),[fn,Ie]=_e(q),xr=F.forwardRef((t,a)=>{const{__scopeAccordion:r,disabled:o,dir:s,orientation:n="vertical",...l}=t,d=F.useRef(null),p=ae(d,a),c=ln(r),h=Je(s)==="ltr",x=Rt(t.onKeyDown,v=>{var T;if(!on.includes(v.key))return;const S=v.target,w=c().filter(K=>{var B;return!((B=K.ref.current)!=null&&B.disabled)}),y=w.findIndex(K=>K.ref.current===S),b=w.length;if(y===-1)return;v.preventDefault();let j=y;const C=0,u=b-1,g=()=>{j=y+1,j>u&&(j=C)},_=()=>{j=y-1,j<C&&(j=u)};switch(v.key){case"Home":j=C;break;case"End":j=u;break;case"ArrowRight":n==="horizontal"&&(h?g():_());break;case"ArrowDown":n==="vertical"&&g();break;case"ArrowLeft":n==="horizontal"&&(h?_():g());break;case"ArrowUp":n==="vertical"&&_();break}const P=j%b;(T=w[P].ref.current)==null||T.focus()});return e.jsx(fn,{scope:r,disabled:o,direction:s,orientation:n,children:e.jsx(rt.Slot,{scope:r,children:e.jsx(O.div,{...l,"data-orientation":n,ref:p,onKeyDown:o?void 0:x})})})}),Ee="AccordionItem",[hn,st]=_e(Ee),gr=F.forwardRef((t,a)=>{const{__scopeAccordion:r,value:o,...s}=t,n=Ie(Ee,r),l=dn(Ee,r),d=at(r),p=J(),c=o&&l.value.includes(o)||!1,f=n.disabled||t.disabled;return e.jsx(hn,{scope:r,open:c,disabled:f,triggerId:p,children:e.jsx(an,{"data-orientation":n.orientation,"data-state":Er(c),...d,...s,ref:a,disabled:f,open:c,onOpenChange:h=>{h?l.onItemOpen(o):l.onItemClose(o)}})})});gr.displayName=Ee;var br="AccordionHeader",jr=F.forwardRef((t,a)=>{const{__scopeAccordion:r,...o}=t,s=Ie(q,r),n=st(br,r);return e.jsx(O.h3,{"data-orientation":s.orientation,"data-state":Er(n.open),"data-disabled":n.disabled?"":void 0,...o,ref:a})});jr.displayName=br;var We="AccordionTrigger",yr=F.forwardRef((t,a)=>{const{__scopeAccordion:r,...o}=t,s=Ie(q,r),n=st(We,r),l=un(We,r),d=at(r);return e.jsx(rt.ItemSlot,{scope:r,children:e.jsx(sn,{"aria-disabled":n.open&&!l.collapsible||void 0,"data-orientation":s.orientation,id:n.triggerId,...d,...o,ref:a})})});yr.displayName=We;var Nr="AccordionContent",Sr=F.forwardRef((t,a)=>{const{__scopeAccordion:r,...o}=t,s=Ie(q,r),n=st(Nr,r),l=at(r);return e.jsx(nn,{role:"region","aria-labelledby":n.triggerId,"data-orientation":s.orientation,...l,...o,ref:a,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Sr.displayName=Nr;function Er(t){return t?"open":"closed"}var vn=fr,xn=gr,gn=jr,bn=yr,jn=Sr;function Fe({...t}){return e.jsx(vn,{"data-slot":"accordion",...t})}function De({className:t,...a}){return e.jsx(xn,{"data-slot":"accordion-item",className:z("border-b last:border-b-0",t),...a})}function Le({className:t,children:a,...r}){return e.jsx(gn,{className:"flex py-4",children:e.jsxs(bn,{"data-slot":"accordion-trigger",className:z("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180 cursor-pointer",t),...r,children:[a,e.jsx(aa,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function Ve({className:t,children:a,...r}){return e.jsx(jn,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...r,children:e.jsx("div",{className:z("pt-0 pb-4",t),children:a})})}const mt=t=>{let a;const r=new Set,o=(c,f)=>{const h=typeof c=="function"?c(a):c;if(!Object.is(h,a)){const x=a;a=f??(typeof h!="object"||h===null)?h:Object.assign({},a,h),r.forEach(v=>v(a,x))}},s=()=>a,d={setState:o,getState:s,getInitialState:()=>p,subscribe:c=>(r.add(c),()=>r.delete(c))},p=a=t(o,s,d);return d},yn=t=>t?mt(t):mt,Nn=t=>t;function Sn(t,a=Nn){const r=F.useSyncExternalStore(t.subscribe,F.useCallback(()=>a(t.getState()),[t,a]),F.useCallback(()=>a(t.getInitialState()),[t,a]));return F.useDebugValue(r),r}const ft=t=>{const a=yn(t),r=o=>Sn(a,o);return Object.assign(r,a),r},En=t=>t?ft(t):ft,Cn=En((t,a)=>({visibilityByProject:{},getVisibility:r=>a().visibilityByProject[r],setVisibility:(r,o)=>{t(s=>({visibilityByProject:{...s.visibilityByProject,[r]:o}}))},clearVisibility:r=>{t(o=>{const{[r]:s,...n}=o.visibilityByProject;return{visibilityByProject:n}})},clearAll:()=>{t({visibilityByProject:{}})}})),eo=function(){var y;const{project_id:a}=Xr.useParams(),{data:r}=ra(Zr({path:{project_id:a}})),{getVisibility:o,setVisibility:s}=Cn(),[n,l]=i.useState(o(r.project_id)||{}),[d,p]=i.useState("");i.useEffect(()=>{s(r.project_id,n)},[n,r.project_id,s]);const{data:c,isLoading:f,error:h}=ir({queryKey:["samples","all",r.project_id],fetcher:({query:b})=>ta({path:{project_id:r.project_id},query:b}),perPage:100,staleTime:5*60*1e3,gcTime:10*60*1e3});if(f)return e.jsx(ea,{variant:"ellipsis"});if(h)return"An error has occurred: "+h.message;if(!c)return"No data was returned.";const x=c.length>0?Array.from(new Set(c.flatMap(b=>{var j;return((j=b.attributes)==null?void 0:j.map(C=>C.key))||[]}))):[],v=[{accessorKey:"sample_id",header:({column:b})=>e.jsx(Te,{column:b,name:"Sample ID"}),cell:({getValue:b})=>{const j=b();return e.jsx(ue,{text:j,variant:"hover",children:Re(j,d)})}},{accessorKey:"project_id",header:({column:b})=>e.jsx(Te,{column:b,name:"Project ID"}),cell:({getValue:b})=>{const j=b();return e.jsx(ue,{text:j,variant:"hover",children:Re(j,d)})}}],S=x.filter(b=>b!==null).map(b=>({id:b,accessorFn:j=>{var u;const C=(u=j.attributes)==null?void 0:u.find(g=>g.key===b);return C==null?void 0:C.value},header:({column:j})=>e.jsx(Te,{column:j,name:b}),cell:({getValue:j})=>{const C=j();return C?e.jsx(ue,{text:C,variant:"hover",children:Re(C,d)}):e.jsx("span",{className:"text-muted-foreground italic",children:"Not found"})}})),w=[...v,...S];return e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(Fe,{type:"single",collapsible:!0,className:"w-full",defaultValue:"attribute-grid",children:e.jsxs(De,{value:"attribute-grid",children:[e.jsx(Le,{className:"uppercase font-light text-primary",children:e.jsxs("span",{className:"flex gap-2  items-center",children:[e.jsx(qa,{size:14})," Project attributes"]})}),e.jsxs(Ve,{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-flow-row gap-2 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(W,{className:"border-0 shadow-none py-2 px-0 bg-transparent",children:e.jsxs(ct,{className:"px-0",children:[e.jsx(X,{className:"uppercase text-sm font-light text-muted-foreground",children:"Project ID"}),e.jsx(Z,{className:"font-semibold ",children:e.jsx(ue,{text:r.project_id||"",variant:it(r.project_id)?"hoverLink":"hover",size:"sm",className:"[&>span]:truncate"})})]})},r.project_id),(y=r.attributes)==null?void 0:y.map(b=>e.jsx(W,{className:"border-0 shadow-none py-2 px-0 bg-transparent",children:e.jsxs(ct,{className:"px-0",children:[e.jsx(X,{className:"uppercase text-sm font-light text-muted-foreground",children:b.key}),e.jsx(Z,{className:"font-semibold ",children:e.jsx(ue,{text:b.value||"",variant:it(b.value)?"hoverLink":"hover",size:"sm",className:"[&>span]:truncate"})})]})},b.key))]}),e.jsx(Zs,{projectId:r.project_id,projectName:r.name,projectAttributes:r.attributes,trigger:e.jsx(G,{variant:"outline",className:"w-full md:w-fit",children:!r.attributes||r.attributes.length===0?e.jsxs(e.Fragment,{children:[e.jsx(It,{}),e.jsx("span",{children:"Add attributes"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ga,{}),e.jsx("span",{children:"Edit attributes"})]})})})]})]})}),e.jsx(Fe,{type:"single",collapsible:!0,className:"w-full",defaultValue:"project-actions",children:e.jsxs(De,{value:"project-actions",children:[e.jsx(Le,{className:"uppercase font-light text-primary",children:e.jsxs("span",{className:"flex gap-2 items-center",children:[e.jsx(wt,{size:14})," Project Actions"]})}),e.jsx(Ve,{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Be,{trigger:e.jsx(W,{className:"cursor-pointer transition-colors hover:bg-accent/50",children:e.jsxs(le,{children:[e.jsxs(X,{className:"flex items-center gap-2 text-lg",children:[e.jsx($a,{className:"size-5 text-primary"}),"Data Bucket"]}),e.jsx(Z,{children:"Browse and manage files in the data bucket for this project"})]})}),rootPath:`${r.data_folder_uri}`}),e.jsx(Be,{trigger:e.jsx(W,{className:"cursor-pointer transition-colors hover:bg-accent/50",children:e.jsxs(le,{children:[e.jsxs(X,{className:"flex items-center gap-2 text-lg",children:[e.jsx(La,{className:"size-5 text-primary-2"}),"Results Bucket"]}),e.jsx(Z,{className:"text-sm",children:"View analysis results and outputs stored in the results bucket"})]})}),rootPath:`${r.results_folder_uri}`}),e.jsx(Js,{projectId:r.project_id,trigger:e.jsx(W,{className:"cursor-pointer transition-colors hover:bg-accent/50",children:e.jsxs(le,{children:[e.jsxs(X,{className:"flex items-center gap-2 text-lg",children:[e.jsx(_a,{className:"size-5 text-primary"}),"Vendor Data"]}),e.jsx(Z,{className:"text-sm",children:"Validate vendor manifest files and ingest vendor data into this project"})]})})}),e.jsx(Ss,{projectId:a,trigger:e.jsx(W,{className:"cursor-pointer transition-colors hover:bg-accent/50",children:e.jsxs(le,{children:[e.jsxs(X,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Ma,{className:"size-5 text-primary"}),"Execute Action"]}),e.jsx(Z,{className:"text-sm",children:"Execute pipelines and actions on this project"})]})})})]})})]})})]}),e.jsx(Fe,{type:"single",collapsible:!0,className:"w-full",defaultValue:"samples-table",children:e.jsxs(De,{value:"samples-table",children:[e.jsx(Le,{className:"uppercase font-light text-primary",children:e.jsxs("span",{className:"flex gap-2 items-center",children:[e.jsx(Ka,{size:14})," Sample table"]})}),e.jsx(Ve,{className:"pt-2",children:c.length>0?e.jsx(sa,{data:c,columns:w,columnVisibility:n,onColumnVisibilityChange:l,globalFilter:d,onFilterChange:p,pageSize:5,isLoading:f}):e.jsx(At,{displayComponent:e.jsx("span",{className:"text-primary hover:underline mx-2",children:"Drag and drop your samplesheet.tsv here, or click to select"})})})]})})]})};export{eo as component};
//# sourceMappingURL=_auth.projects._project_id.index-BN9cn3y_.js.map
