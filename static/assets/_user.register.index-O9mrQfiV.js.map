{"version":3,"file":"_user.register.index-O9mrQfiV.js","sources":["../../src/components/register-success-dialog.tsx","../../src/components/register-form.tsx","../../src/routes/_user.register.index.tsx?tsr-split=component"],"sourcesContent":["import { useMutation } from '@tanstack/react-query'\nimport { toast } from 'sonner'\nimport { useNavigate } from '@tanstack/react-router'\nimport type { Dispatch, SetStateAction } from 'react'\nimport type { BodyLogin } from '@/client'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { loginMutation } from '@/client/@tanstack/react-query.gen'\n\ninterface RegisterSuccessDialogProps {\n  open: boolean\n  onOpenChange: Dispatch<SetStateAction<boolean>>\n  data: BodyLogin\n}\n\nexport function RegisterSuccessDialog({\n  open,\n  onOpenChange,\n  data,\n}: RegisterSuccessDialogProps) {\n  const navigate = useNavigate()\n  \n  const { mutate } = useMutation({\n    ...loginMutation(),\n    onError: (error) => {\n      const message =\n        error.response?.data.detail?.toString() || 'An unknown error occurred.'\n      toast.error(message)\n    },\n    onSuccess: () => {\n      toast.success('Login successful')\n      navigate({ to: '/' })\n    },\n  })\n\n  const onClickHandler = (): void => {\n    const updatedData = { ...data, grant_type: 'password' }\n    mutate({ body: updatedData })\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Success!</DialogTitle>\n          <DialogDescription>\n            Your account has been created successfully! <br />\n            Click continue to login to the NGS360 portal.\n          </DialogDescription>\n        </DialogHeader>\n        <DialogFooter>\n          <Button onClick={() => onClickHandler()}>Continue</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","import { Link } from '@tanstack/react-router'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { useMutation } from '@tanstack/react-query'\nimport { LoaderCircle } from 'lucide-react'\nimport { z } from 'zod'\nimport { useState } from 'react'\nimport type { ComponentPropsWithoutRef } from 'react'\nimport type { SubmitHandler } from 'react-hook-form'\nimport type { UserPublic, UserRegister } from '@/client'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Card, CardContent, CardHeader } from '@/components/ui/card'\nimport { cn } from '@/lib/utils'\nimport { registerMutation } from '@/client/@tanstack/react-query.gen'\nimport { NGS360Logo } from '@/components/ngs360-logo'\nimport { RegisterSuccessDialog } from '@/components/register-success-dialog'\n\nconst schema = z\n  .object({\n    username: z.string().min(3, 'Username must be at least 3 characters'),\n    email: z.string().email('Please enter a valid email address'),\n    full_name: z.string().min(2, 'Full name must be at least 2 characters'),\n    password: z.string().min(8, 'Password must be at least 8 characters').max(50),\n    confirm_password: z.string().min(8).max(50),\n  })\n  .refine((data) => data.password === data.confirm_password, {\n    message: 'Passwords do not match',\n    path: ['confirm_password'],\n  })\n\ntype FormFields = z.infer<typeof schema>\n\nexport function RegisterForm({\n  className,\n  ...props\n}: ComponentPropsWithoutRef<'form'>) {\n  const [dialogOpen, setDialogOpen] = useState<boolean>(false)\n  const [email, setEmail] = useState<string>('')\n  const [password, setPassword] = useState<string>('')\n\n  const {\n    register,\n    handleSubmit,\n    setError,\n    formState: { errors, isSubmitting },\n  } = useForm<FormFields>({\n    resolver: zodResolver(schema),\n  })\n\n  const { mutate, isPending } = useMutation({\n    ...registerMutation(),\n    onError: (error) => {\n      const message =\n        error.response?.data.detail?.toString() || 'An unknown error occurred.'\n      setError('root', { message })\n    },\n    onSuccess: (_data: UserPublic, variables: { body: UserRegister }) => {\n      setEmail(variables.body.email)\n      setPassword(variables.body.password)\n      setDialogOpen(true)\n    },\n  })\n\n  const onSubmit: SubmitHandler<FormFields> = async (data) => {\n    const body: UserRegister = {\n      username: data.username,\n      email: data.email,\n      full_name: data.full_name,\n      password: data.password,\n    }\n    mutate({ body: { ...body } })\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-primary-2/5 p-4\">\n      <RegisterSuccessDialog\n        open={dialogOpen}\n        onOpenChange={setDialogOpen}\n        data={{ username: email, password: password }}\n      />\n      \n      <div className=\"w-full max-w-md\">\n        <Card>\n          <CardHeader></CardHeader>\n          <CardContent>\n            <form\n              onSubmit={handleSubmit(onSubmit)}\n              className={cn('flex flex-col gap-6', className)}\n              {...props}\n            >\n              {/* Logo and Title Section */}\n              <div className=\"flex flex-col items-center gap-2 text-center\">\n                <NGS360Logo className=\"mb-2\" />\n                <h1 className=\"text-2xl font-bold\">Create an account</h1>\n                <p className=\"text-sm text-muted-foreground max-w-xs\">\n                  Register for a new NGS360 account.\n                </p>\n              </div>\n\n              <div className=\"grid gap-4\">\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"username\">Username</Label>\n                  <Input\n                    {...register('username')}\n                    id=\"username\"\n                    type=\"text\"\n                    placeholder=\"johndoe\"\n                    required\n                  />\n                  {errors.username && (\n                    <div className=\"text-red-500 text-xs text-left\">\n                      {errors.username.message}\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"full_name\">Full Name</Label>\n                  <Input\n                    {...register('full_name')}\n                    id=\"full_name\"\n                    type=\"text\"\n                    placeholder=\"John Doe\"\n                    required\n                  />\n                  {errors.full_name && (\n                    <div className=\"text-red-500 text-xs text-left\">\n                      {errors.full_name.message}\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"email\">Email</Label>\n                  <Input\n                    {...register('email')}\n                    id=\"email\"\n                    type=\"email\"\n                    placeholder=\"john.doe@example.com\"\n                    required\n                  />\n                  {errors.email && (\n                    <div className=\"text-red-500 text-xs text-left\">\n                      {errors.email.message}\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"password\">Password</Label>\n                  <Input\n                    {...register('password')}\n                    id=\"password\"\n                    type=\"password\"\n                    placeholder=\"********\"\n                    required\n                  />\n                  {errors.password && (\n                    <div className=\"text-red-500 text-xs text-left\">\n                      {errors.password.message}\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"confirm_password\">Confirm Password</Label>\n                  <Input\n                    {...register('confirm_password')}\n                    id=\"confirm_password\"\n                    type=\"password\"\n                    placeholder=\"********\"\n                    required\n                  />\n                  {errors.confirm_password && (\n                    <div className=\"text-red-500 text-xs text-left\">\n                      {errors.confirm_password.message}\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              <Button\n                disabled={isSubmitting || isPending}\n                type=\"submit\"\n                className=\"flex items-center gap-2\"\n              >\n                {isSubmitting || isPending ? (\n                  <LoaderCircle className=\"animate-spin h-4 w-4 text-white\" />\n                ) : null}\n                {isSubmitting || isPending ? 'Creating account...' : 'Create Account'}\n              </Button>\n\n              {errors.root && (\n                <div className=\"text-red-500 text-sm text-center\">\n                  {errors.root.message}\n                </div>\n              )}\n\n              <div className=\"text-center text-sm\">\n                Already have an account?{' '}\n                <Link to=\"/login\" className=\"underline underline-offset-4\">\n                  Log in\n                </Link>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n\n        {/* Footer */}\n        <div className=\"text-center mt-6 text-sm text-muted-foreground\">\n          <p>Â© {new Date().getFullYear()} BMS NGS360. All rights reserved.</p>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { createFileRoute } from '@tanstack/react-router'\nimport { RegisterForm } from '@/components/register-form'\n\nexport const Route = createFileRoute('/_user/register/')({\n  component: RouteComponent,\n})\n\nfunction RouteComponent() {\n  return <RegisterForm />\n}\n"],"names":["RegisterSuccessDialog","open","onOpenChange","data","navigate","useNavigate","mutate","useMutation","loginMutation","error","message","_b","_a","toast","onClickHandler","updatedData","jsx","Dialog","DialogContent","jsxs","DialogHeader","DialogTitle","DialogDescription","DialogFooter","Button","schema","z.object","z.string","RegisterForm","className","props","dialogOpen","setDialogOpen","useState","email","setEmail","password","setPassword","register","handleSubmit","setError","errors","isSubmitting","useForm","zodResolver","isPending","registerMutation","_data","variables","onSubmit","body","Card","CardHeader","CardContent","cn","NGS360Logo","Label","Input","LoaderCircle","Link","SplitComponent"],"mappings":"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"}