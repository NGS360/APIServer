import{a7 as v,u as y,r as n,a8 as N,j as e,a5 as S,h as C,B as m,a6 as P}from"./index-BIirldc1.js";import{u as k}from"./useQuery-CTa4JkgR.js";import{S as D,a as g}from"./sortable-header-CBUhMdW4.js";import{C as I}from"./copyable-text-hzJJx6rD.js";import{u as q}from"./use-debounce-R5sUNkyS.js";import"./useBaseQuery-o_MHl0Bk.js";import"./index-P1ukJAZU.js";import"./scroll-area-BlkD1AVU.js";import"./popover-Daw9D_6H.js";import"./check-DV4XU-UY.js";import"./button-C2PM_K_5.js";import"./input-DMyO_KgQ.js";const M=function(){const a=v.useSearch(),p=y(),[d,x]=n.useState(a.query),o=q(d,300),[i,h]=n.useState({pageIndex:a.page-1,pageSize:a.per_page}),[c,j]=n.useState([{id:a.sort_by,desc:a.sort_order=="desc"}]);n.useEffect(()=>{p({to:"/projects",search:{...a,query:o,page:1}})},[o]),n.useEffect(()=>{var t,r;p({to:"/projects",search:{...a,page:i.pageIndex+1,per_page:i.pageSize,sort_by:(t=c[0])==null?void 0:t.id,sort_order:(r=c[0])!=null&&r.desc?"desc":"asc"},replace:!0})},[i,c]);const{data:l,isLoading:f,error:u}=k({...N({query:{query:o,page:a.page,per_page:a.per_page,sort_by:a.sort_by,sort_order:a.sort_order}}),placeholderData:P});if(f)return e.jsx(S,{variant:"ellipsis"});if(u)return"An error has occurred: "+u.message;if(!l)return"No data was returned.";const _=[{accessorKey:"project_id",meta:{alias:"Project ID",tdClassName:"align-top"},header:({column:t})=>e.jsx(g,{column:t,name:"Project ID"}),cell:({cell:t})=>{const r=t.getValue();return e.jsx(I,{text:r,variant:"hoverLink",asChild:!0,children:e.jsx(C,{to:"/projects/$project_id",params:{project_id:r},search:{page:1,per_page:5,sort_by:void 0,sort_order:void 0},children:m(r,o)})})}},{accessorKey:"name",meta:{alias:"Project Name",tdClassName:"align-top"},header:({column:t})=>e.jsx(g,{column:t,name:"Project Name"}),cell:({row:t})=>{const r=t.getValue("name"),b=t.original.attributes??[];return e.jsxs("div",{className:"flex flex-col gap-2 break-words whitespace-normal",children:[e.jsxs("span",{className:"text-sm",children:[" ",m(r,o)]}),e.jsx("div",{className:"flex flex-wrap gap-0.5",children:b.map(s=>e.jsx("div",{className:"text-muted-foreground border-1 rounded-full px-2 text-xs",children:e.jsxs("span",{children:[s.key,": ",s.value&&s.value.length>50?s.value.slice(0,50)+"...":s.value]})},s.key))})]})}}];return e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsx("h1",{className:"text-2xl",children:"Projects"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"View all projects in NGS360"}),e.jsx(D,{data:l.data,columns:_,globalFilter:d,onFilterChange:x,pagination:i,onPaginationChange:h,pageCount:l.total_pages,totalItems:l.total_items,sorting:c,onSortingChange:j})]})};export{M as component};
//# sourceMappingURL=_auth.projects.index-D2nRIMyr.js.map
