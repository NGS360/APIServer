import{c as t,as as f,a$ as N,b0 as b,j as e}from"./index-BIirldc1.js";import{u}from"./useQuery-CTa4JkgR.js";import{C as n,a as i,b as m,c}from"./card-B_B2k0jE.js";import{C as x}from"./copyable-text-hzJJx6rD.js";import{J as y}from"./job-status-badge-ahLloNQM.js";import{S as a}from"./separator-ClsyK3GL.js";import{S as v,a as w}from"./scroll-area-BlkD1AVU.js";import{U as k}from"./user-Db7k31Xy.js";import"./useBaseQuery-o_MHl0Bk.js";import"./check-DV4XU-UY.js";import"./circle-x-D_RBEnZV.js";import"./circle-play-u-Uw65K8.js";import"./zap-BU4rm8MZ.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],S=t("Calendar",_);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],L=t("Cloud",C);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],J=t("FileText",I);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],T=t("Server",M);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],D=t("Terminal",B),Z=function(){const p=f("/_auth/jobs/$job_id"),{job:o}=p.useLoaderData(),{data:s=o}=u({...N({path:{job_id:o.id}}),initialData:o,refetchInterval:5e3,refetchIntervalInBackground:!0}),h=["SUBMITTED","PENDING","RUNNABLE","STARTING","RUNNING"].includes(s.status),{data:r,isLoading:j,error:l}=u({...b({path:{job_id:s.id}}),refetchInterval:h?5e3:!1,refetchIntervalInBackground:!0}),d=r==null?void 0:r.join(`
`),g=l instanceof Error?l.message:"Unable to load job log.";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-extralight break-words",children:s.name}),e.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[e.jsxs("span",{className:"inline-flex items-center text-sm text-muted-foreground",children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${s.viewed?"bg-gray-400":"bg-blue-500"}`}),s.viewed?"Viewed":"Unviewed"]}),e.jsx(y,{status:s.status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(n,{className:"border-0 shadow-none",children:[e.jsx(i,{children:e.jsx(m,{children:"Job Details"})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(T,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Job ID"}),e.jsx(x,{text:s.id,className:"text-sm text-muted-foreground"})]})]}),e.jsx(a,{}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(k,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Submitted By"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.user})]})]}),e.jsx(a,{}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(S,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Submitted On"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.submitted_on).toLocaleString()})]})]})]})]}),e.jsxs(n,{className:"border-0 shadow-none",children:[e.jsx(i,{children:e.jsx(m,{children:"AWS Batch Information"})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(L,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"AWS Job ID"}),s.aws_job_id?e.jsx(x,{text:s.aws_job_id,className:"text-sm text-muted-foreground font-mono"}):e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Not available"})]})]}),e.jsx(a,{}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(J,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Log Stream Name"}),s.log_stream_name?e.jsx(x,{text:s.log_stream_name,className:"text-sm text-muted-foreground font-mono break-all"}):e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Not available"})]})]}),e.jsx(a,{}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(D,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Command"}),e.jsx("code",{className:"block text-sm text-muted-foreground bg-muted p-2 rounded break-all",children:s.command})]})]})]})]})]}),e.jsxs(n,{className:"border-0 shadow-none",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsx(m,{children:"Job Log"}),h?e.jsxs("span",{className:"inline-flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-primary animate-pulse"}),"Live updating"]}):null]}),e.jsx(c,{children:e.jsxs(v,{className:"h-[500px] rounded-lg border border-border bg-muted",children:[j?e.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"Loading job log..."}):l?e.jsxs("div",{className:"p-4 text-sm text-destructive",children:["Failed to load job log: ",g]}):e.jsx("div",{className:"p-4 font-mono text-sm text-muted-foreground whitespace-pre",children:d&&d.length>0?d:"No job log output is available yet."}),e.jsx(w,{orientation:"horizontal"})]})})]})]})};export{Z as component};
//# sourceMappingURL=_auth.jobs._job_id.index-DIcK5nNr.js.map
