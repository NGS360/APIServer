import{u as F,G as q,j as s,x as G,L as T,o as Y,s as g,H,h as I}from"./index-BIirldc1.js";import{C as t,a as o,c as n,b as B}from"./card-B_B2k0jE.js";import{B as i}from"./button-C2PM_K_5.js";import{u as M}from"./index.esm-DeL_VMPh.js";import{a as z,L as N}from"./label-BoUK3cZg.js";import{u as V}from"./useMutation-DLDY0_Jn.js";import{t as b}from"./index-CbXsuHis.js";import{I as v}from"./input-DMyO_KgQ.js";import{N as X}from"./ngs360-logo-CZCZml11.js";import{C as _}from"./circle-check-CmdczWJV.js";import{C as P}from"./circle-x-D_RBEnZV.js";const A=Y({password:g().min(8,"Password must be at least 8 characters").max(100,"Password must be at most 100 characters"),confirmPassword:g()}).refine(r=>r.password===r.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function D({token:r,className:d,...a}){var w,h;const c=F(),{register:m,handleSubmit:C,setError:k,formState:{errors:e,isSubmitting:x}}=M({defaultValues:{password:"",confirmPassword:""},resolver:z(A)}),{mutate:y,isPending:u,isSuccess:R,isError:S,error:L}=V({...q(),onError:l=>{var f,j;const p=((j=(f=l.response)==null?void 0:f.data.detail)==null?void 0:j.toString())||"The reset token is invalid or has expired. Please request a new password reset.";k("root",{message:p}),b.error(p)},onSuccess:()=>{b.success("Password reset successful! You can now log in with your new password.")}}),E=async l=>{y({body:{token:r,new_password:l.password}})};return R?s.jsxs(t,{className:"w-full max-w-md",children:[s.jsx(o,{}),s.jsxs(n,{className:"flex flex-col items-center gap-6",children:[s.jsx(_,{className:"h-16 w-16 text-green-500"}),s.jsxs("div",{className:"text-center space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Password Reset Successful!"}),s.jsx("p",{className:"text-muted-foreground",children:"Your password has been reset. You can now log in with your new password."})]}),s.jsx(i,{onClick:()=>c({to:"/login"}),className:"w-full",children:"Go to Login"})]})]})]}):S?s.jsxs(t,{className:"w-full max-w-md",children:[s.jsx(o,{}),s.jsxs(n,{className:"flex flex-col items-center gap-6",children:[s.jsx(P,{className:"h-16 w-16 text-destructive"}),s.jsxs("div",{className:"text-center space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Reset Failed"}),s.jsx("p",{className:"text-muted-foreground",children:((h=(w=L.response)==null?void 0:w.data.detail)==null?void 0:h.toString())||"The reset token is invalid or has expired. Please request a new password reset."})]}),s.jsx(i,{onClick:()=>c({to:"/forgot-password"}),className:"w-full",variant:"outline",children:"Request New Reset Link"})]})]})]}):s.jsxs(t,{className:"w-full max-w-md",children:[s.jsx(o,{}),s.jsx(n,{children:s.jsxs("form",{onSubmit:C(E),className:G("flex flex-col gap-6",d),...a,children:[s.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[s.jsx(X,{className:"mb-2"}),s.jsx("h1",{className:"text-2xl font-bold",children:"Reset Your Password"}),s.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"Enter your new password below."})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(N,{htmlFor:"password",children:"New Password"}),s.jsx(v,{...m("password"),id:"password",type:"password",placeholder:"Enter new password",required:!0}),e.password&&s.jsx("div",{className:"text-red-500 text-xs text-left",children:e.password.message})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(N,{htmlFor:"confirmPassword",children:"Confirm Password"}),s.jsx(v,{...m("confirmPassword"),id:"confirmPassword",type:"password",placeholder:"Confirm new password",required:!0}),e.confirmPassword&&s.jsx("div",{className:"text-red-500 text-xs text-left",children:e.confirmPassword.message})]}),e.root&&s.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 dark:bg-red-950/20 p-3 rounded-md",children:e.root.message}),s.jsx(i,{disabled:x||u,type:"submit",className:"flex items-center gap-2",children:x||u?s.jsxs(s.Fragment,{children:[s.jsx(T,{className:"animate-spin",size:18}),"Resetting Password..."]}):"Reset Password"})]})})]})}const as=function(){const d=H.useSearch(),{token:a}=d;return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-primary-2/5 p-4",children:a?s.jsx(D,{token:a}):s.jsxs(t,{className:"w-full max-w-md",children:[s.jsx(o,{children:s.jsx(B,{className:"text-center text-2xl",children:"Invalid Reset Link"})}),s.jsxs(n,{className:"flex flex-col items-center gap-6",children:[s.jsx(P,{className:"h-16 w-16 text-destructive"}),s.jsxs("div",{className:"text-center space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Token Provided"}),s.jsx("p",{className:"text-muted-foreground",children:"No reset token was provided. Please check your email for the password reset link."})]}),s.jsx(i,{asChild:!0,className:"w-full",variant:"outline",children:s.jsx(I,{to:"/",children:"Go to Homepage"})})]})]})]})})};export{as as component};
//# sourceMappingURL=_user.reset-password-CAxn23z-.js.map
