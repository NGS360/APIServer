{"version":3,"file":"file-browser-BAEarV4r.js","sources":["../../node_modules/lucide-react/dist/esm/icons/undo-2.js","../../node_modules/@radix-ui/react-checkbox/dist/index.mjs","../../src/components/ui/checkbox.tsx","../../src/components/file-browser.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.476.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M9 14 4 9l5-5\", key: \"102s5s\" }],\n  [\"path\", { d: \"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11\", key: \"f3b9sd\" }]\n];\nconst Undo2 = createLucideIcon(\"Undo2\", __iconNode);\n\nexport { __iconNode, Undo2 as default };\n//# sourceMappingURL=undo-2.js.map\n","\"use client\";\n\n// src/checkbox.tsx\nimport * as React from \"react\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nvar CHECKBOX_NAME = \"Checkbox\";\nvar [createCheckboxContext, createCheckboxScope] = createContextScope(CHECKBOX_NAME);\nvar [CheckboxProviderImpl, useCheckboxContext] = createCheckboxContext(CHECKBOX_NAME);\nfunction CheckboxProvider(props) {\n  const {\n    __scopeCheckbox,\n    checked: checkedProp,\n    children,\n    defaultChecked,\n    disabled,\n    form,\n    name,\n    onCheckedChange,\n    required,\n    value = \"on\",\n    // @ts-expect-error\n    internal_do_not_use_render\n  } = props;\n  const [checked, setChecked] = useControllableState({\n    prop: checkedProp,\n    defaultProp: defaultChecked ?? false,\n    onChange: onCheckedChange,\n    caller: CHECKBOX_NAME\n  });\n  const [control, setControl] = React.useState(null);\n  const [bubbleInput, setBubbleInput] = React.useState(null);\n  const hasConsumerStoppedPropagationRef = React.useRef(false);\n  const isFormControl = control ? !!form || !!control.closest(\"form\") : (\n    // We set this to true by default so that events bubble to forms without JS (SSR)\n    true\n  );\n  const context = {\n    checked,\n    disabled,\n    setChecked,\n    control,\n    setControl,\n    name,\n    form,\n    value,\n    hasConsumerStoppedPropagationRef,\n    required,\n    defaultChecked: isIndeterminate(defaultChecked) ? false : defaultChecked,\n    isFormControl,\n    bubbleInput,\n    setBubbleInput\n  };\n  return /* @__PURE__ */ jsx(\n    CheckboxProviderImpl,\n    {\n      scope: __scopeCheckbox,\n      ...context,\n      children: isFunction(internal_do_not_use_render) ? internal_do_not_use_render(context) : children\n    }\n  );\n}\nvar TRIGGER_NAME = \"CheckboxTrigger\";\nvar CheckboxTrigger = React.forwardRef(\n  ({ __scopeCheckbox, onKeyDown, onClick, ...checkboxProps }, forwardedRef) => {\n    const {\n      control,\n      value,\n      disabled,\n      checked,\n      required,\n      setControl,\n      setChecked,\n      hasConsumerStoppedPropagationRef,\n      isFormControl,\n      bubbleInput\n    } = useCheckboxContext(TRIGGER_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setControl);\n    const initialCheckedStateRef = React.useRef(checked);\n    React.useEffect(() => {\n      const form = control?.form;\n      if (form) {\n        const reset = () => setChecked(initialCheckedStateRef.current);\n        form.addEventListener(\"reset\", reset);\n        return () => form.removeEventListener(\"reset\", reset);\n      }\n    }, [control, setChecked]);\n    return /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        type: \"button\",\n        role: \"checkbox\",\n        \"aria-checked\": isIndeterminate(checked) ? \"mixed\" : checked,\n        \"aria-required\": required,\n        \"data-state\": getState(checked),\n        \"data-disabled\": disabled ? \"\" : void 0,\n        disabled,\n        value,\n        ...checkboxProps,\n        ref: composedRefs,\n        onKeyDown: composeEventHandlers(onKeyDown, (event) => {\n          if (event.key === \"Enter\") event.preventDefault();\n        }),\n        onClick: composeEventHandlers(onClick, (event) => {\n          setChecked((prevChecked) => isIndeterminate(prevChecked) ? true : !prevChecked);\n          if (bubbleInput && isFormControl) {\n            hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n            if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n          }\n        })\n      }\n    );\n  }\n);\nCheckboxTrigger.displayName = TRIGGER_NAME;\nvar Checkbox = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeCheckbox,\n      name,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      value,\n      onCheckedChange,\n      form,\n      ...checkboxProps\n    } = props;\n    return /* @__PURE__ */ jsx(\n      CheckboxProvider,\n      {\n        __scopeCheckbox,\n        checked,\n        defaultChecked,\n        disabled,\n        required,\n        onCheckedChange,\n        name,\n        form,\n        value,\n        internal_do_not_use_render: ({ isFormControl }) => /* @__PURE__ */ jsxs(Fragment, { children: [\n          /* @__PURE__ */ jsx(\n            CheckboxTrigger,\n            {\n              ...checkboxProps,\n              ref: forwardedRef,\n              __scopeCheckbox\n            }\n          ),\n          isFormControl && /* @__PURE__ */ jsx(\n            CheckboxBubbleInput,\n            {\n              __scopeCheckbox\n            }\n          )\n        ] })\n      }\n    );\n  }\n);\nCheckbox.displayName = CHECKBOX_NAME;\nvar INDICATOR_NAME = \"CheckboxIndicator\";\nvar CheckboxIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeCheckbox, forceMount, ...indicatorProps } = props;\n    const context = useCheckboxContext(INDICATOR_NAME, __scopeCheckbox);\n    return /* @__PURE__ */ jsx(\n      Presence,\n      {\n        present: forceMount || isIndeterminate(context.checked) || context.checked === true,\n        children: /* @__PURE__ */ jsx(\n          Primitive.span,\n          {\n            \"data-state\": getState(context.checked),\n            \"data-disabled\": context.disabled ? \"\" : void 0,\n            ...indicatorProps,\n            ref: forwardedRef,\n            style: { pointerEvents: \"none\", ...props.style }\n          }\n        )\n      }\n    );\n  }\n);\nCheckboxIndicator.displayName = INDICATOR_NAME;\nvar BUBBLE_INPUT_NAME = \"CheckboxBubbleInput\";\nvar CheckboxBubbleInput = React.forwardRef(\n  ({ __scopeCheckbox, ...props }, forwardedRef) => {\n    const {\n      control,\n      hasConsumerStoppedPropagationRef,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      name,\n      value,\n      form,\n      bubbleInput,\n      setBubbleInput\n    } = useCheckboxContext(BUBBLE_INPUT_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setBubbleInput);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = bubbleInput;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      const bubbles = !hasConsumerStoppedPropagationRef.current;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        input.indeterminate = isIndeterminate(checked);\n        setChecked.call(input, isIndeterminate(checked) ? false : checked);\n        input.dispatchEvent(event);\n      }\n    }, [bubbleInput, prevChecked, checked, hasConsumerStoppedPropagationRef]);\n    const defaultCheckedRef = React.useRef(isIndeterminate(checked) ? false : checked);\n    return /* @__PURE__ */ jsx(\n      Primitive.input,\n      {\n        type: \"checkbox\",\n        \"aria-hidden\": true,\n        defaultChecked: defaultChecked ?? defaultCheckedRef.current,\n        required,\n        disabled,\n        name,\n        value,\n        form,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0,\n          // We transform because the input is absolutely positioned but we have\n          // rendered it **after** the button. This pulls it back to sit on top\n          // of the button.\n          transform: \"translateX(-100%)\"\n        }\n      }\n    );\n  }\n);\nCheckboxBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction isFunction(value) {\n  return typeof value === \"function\";\n}\nfunction isIndeterminate(checked) {\n  return checked === \"indeterminate\";\n}\nfunction getState(checked) {\n  return isIndeterminate(checked) ? \"indeterminate\" : checked ? \"checked\" : \"unchecked\";\n}\nexport {\n  Checkbox,\n  CheckboxIndicator,\n  CheckboxIndicator as Indicator,\n  Checkbox as Root,\n  createCheckboxScope,\n  CheckboxBubbleInput as unstable_BubbleInput,\n  CheckboxBubbleInput as unstable_CheckboxBubbleInput,\n  CheckboxProvider as unstable_CheckboxProvider,\n  CheckboxTrigger as unstable_CheckboxTrigger,\n  CheckboxProvider as unstable_Provider,\n  CheckboxTrigger as unstable_Trigger\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { CheckIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Checkbox({\n  className,\n  ...props\n}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {\n  return (\n    <CheckboxPrimitive.Root\n      data-slot=\"checkbox\"\n      className={cn(\n        \"peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        data-slot=\"checkbox-indicator\"\n        className=\"flex items-center justify-center text-current transition-none\"\n      >\n        <CheckIcon className=\"size-3.5 text-current\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  )\n}\n\nexport { Checkbox }\n","import { useEffect, useState } from \"react\";\nimport { useQuery } from '@tanstack/react-query';\nimport { Folder, Undo2 } from \"lucide-react\";\nimport { ClientDataTable } from \"./data-table/data-table\";\nimport type { ColumnDef } from \"@tanstack/react-table\";\nimport type { FileBrowserFile, FileBrowserFolder } from '@/client/types.gen';\nimport { browseS3Options } from '@/client/@tanstack/react-query.gen';\nimport { Dialog, DialogClose, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { SortableHeader } from \"@/components/data-table/sortable-header\";\n\n// Helper function for formatting bytes\nfunction formatBytes(bytes: number, decimals = 2) {\n  if (bytes === 0) return '0 B';\n  const k = 1024;\n  const dm = Math.max(0, decimals);\n  const idx = Math.floor(Math.log(bytes) / Math.log(k));\n  const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n  return parseFloat((bytes / Math.pow(k, idx)).toFixed(dm)) + ' ' + sizes[idx];\n}\n\n// Helper function to safely format dates\nfunction formatDate(dateString: string): string {\n  if (!dateString || dateString === '-') return '-';\n  \n  try {\n    const date = new Date(dateString);\n    // Check if the date is valid\n    if (isNaN(date.getTime())) {\n      return '-';\n    }\n    return date.toLocaleString();\n  } catch {\n    return '-';\n  }\n}\n\n// Helper function to normalize file names\nfunction normalizeFileName(fullPath: string, currentPath: string) {\n  return fullPath.replace(currentPath, '').replace(/^\\//, '/');\n}\n\n// Define column structure\ninterface FileBrowserColumns {\n  name: string,\n  fullPath: string,\n  date: string,\n  size?: number,\n  dir: boolean\n}\n\n// File browser component\ninterface FileBrowserProps {\n\n  /** Root path - user unable to navigate above here */\n  rootPath: string;\n  \n  /** Full path to browse */\n  directoryPath?: string;\n\n  /** Optional header to display current path */\n  showHeader?: boolean;\n\n  /** Optional callback when directory path changes */\n  onDirectoryChange?: (path: string) => void;\n}\n\nexport const FileBrowser: React.FC<FileBrowserProps> = ({\n  rootPath,\n  directoryPath = rootPath,\n  showHeader = false,\n  onDirectoryChange,\n}) => {\n  // Manage directory path internally, but initialize with directoryPath\n  const [currentDirectoryPath, setCurrentDirectoryPath] = useState<string>(directoryPath);\n  \n  // Manage search filter state\n  const [globalFilter, setGlobalFilter] = useState<string>('');\n\n  // Update internal state when directoryPath prop changes\n  useEffect(() => {\n    setCurrentDirectoryPath(directoryPath);\n  }, [directoryPath]);\n\n  // Wrapper for setDirectoryPath that also calls the callback\n  const handleDirectoryChange = (newPath: string) => {\n    setCurrentDirectoryPath(newPath);\n    setGlobalFilter(''); // Clear search filter when changing directories\n    onDirectoryChange?.(newPath);\n  };\n\n  // Query for file/folder data using browseFilesystem\n  const { data, isLoading, isError, error } = useQuery({\n    ...browseS3Options({\n      query: {\n        uri: currentDirectoryPath\n      },\n    }),\n    // placeholderData: keepPreviousData // comment out for now\n  });\n\n  // Reformat the data into a structure suitable for rendering to a table\n  const tableData: Array<FileBrowserColumns> = [\n    ...(data?.folders.map((d: FileBrowserFolder) => ({\n      name: normalizeFileName(d.name, currentDirectoryPath),\n      fullPath: d.name,\n      date: d.date,\n      dir: true,\n    })) || []),\n    ...(data?.files.map((d: FileBrowserFile) => ({\n      name: normalizeFileName(d.name, currentDirectoryPath),\n      fullPath: d.name,\n      date: d.date,\n      size: d.size,\n      dir: false,\n    })) || [])\n  ];\n\n  // Define up/down directory click handlers\n  const downDirClickHandler = (next: string) => {\n    const newPath = currentDirectoryPath.endsWith('/') \n      ? `${currentDirectoryPath}${next}/`\n      : `${currentDirectoryPath}/${next}/`;\n    handleDirectoryChange(newPath);\n  };\n  const upDirClickHandler = () => {\n    const parts = currentDirectoryPath.split('/').filter(Boolean);\n    if (parts.length === 0) return;\n    \n    // Don't allow navigation above rootPath\n    const rootParts = rootPath.split('/').filter(Boolean);\n    if (parts.length <= rootParts.length) return;\n\n    // Reconstruct the new path\n    const stemPart = parts.slice(0, 2).join('//')\n    const endParts = parts.slice(2)\n    endParts.pop()\n    const end = endParts.join('/')  \n    const newPath = end ? [stemPart, end].join('/') : stemPart;\n    handleDirectoryChange(newPath.endsWith('/') ? newPath : newPath + '/');\n  };\n\n  // File download handler\n  const handleFileDownload = (fileName: string) => {\n    try {\n      // Construct the full S3 path from currentDirectoryPath + fileName\n      const fullPath = currentDirectoryPath.endsWith('/') \n        ? `${currentDirectoryPath}${fileName}`\n        : `${currentDirectoryPath}/${fileName}`;\n\n      // Build the download URL\n      const baseUrl = import.meta.env.VITE_API_URL || '';\n      const cleanBaseUrl = baseUrl.endsWith('/') ? baseUrl.slice(0, -1) : baseUrl;\n      const url = `${cleanBaseUrl}/api/v1/files/download?path=${encodeURIComponent(fullPath)}`;\n      \n      // Open in new tab to trigger download\n      window.open(url, '_blank');\n    } catch (downloadError) {\n      // Display error in alert box\n      const errorMessage = downloadError instanceof Error ? downloadError.message : 'Failed to download file';\n      alert(`Download error: ${errorMessage}`);\n    }\n  };\n\n  // Define columns for file display component\n  const columns: Array<ColumnDef<FileBrowserColumns>> = [\n    {\n      accessorKey: 'name',\n      meta: { alias: 'Name' },\n      header: ({ column }) => <SortableHeader column={column} name=\"Name\" />,\n      cell: ({ cell }) => {\n        const { dir, name } = cell.row.original;\n        return (\n          <span\n            className=\"flex gap-2 items-center hover:underline hover:cursor-pointer text-primary\"\n            onClick={() => {\n              if (dir) {\n                downDirClickHandler(name);\n              } else {\n                handleFileDownload(name);\n              }\n            }}\n          >\n            <Folder className={`size-4 ${dir ? 'opacity-100' : 'opacity-0'}`} />\n            {dir ? name.replace('/', '') : name}\n          </span>\n        );\n      },\n    },\n    {\n      accessorKey: 'size',\n      meta: { alias: 'Size' },\n      header: ({ column }) => <SortableHeader column={column} name=\"Size\" />,\n      cell: ({ row }) => {\n        const { dir, size } = row.original;\n        return !dir && size != null ? formatBytes(size) : '-';\n      },\n    },\n    {\n      accessorKey: 'date',\n      meta: { alias: 'Modified' },\n      header: ({ column }) => <SortableHeader column={column} name=\"Modified\" />,\n      cell: ({ row }) => {\n        const { date } = row.original;\n        return formatDate(date);\n      },\n    },\n  ];\n\n  if (isError) {\n    return <div className=\"p-4 text-center text-destructive\">Error: {error.message || 'Failed to load directory.'}</div>;\n  }\n\n  return (\n    <div className=\"flex flex-col gap-4\">\n      {showHeader && (\n        <h2 className=\"text-lg font-medium text-muted-foreground break-words\">\n          Files for {currentDirectoryPath}\n        </h2>\n      )}\n      <ClientDataTable\n        data={tableData}\n        columns={columns}\n        renderCustomRowComponent={currentDirectoryPath !== rootPath}\n        customRowComponent={() => (\n          <span\n            className=\"flex gap-2 items-center hover:underline hover:cursor-pointer text-primary\"\n            onClick={upDirClickHandler}\n          >\n            <Undo2 className={`size-4`} />\n            Up a level\n          </span>\n        )}\n        isLoading={isLoading}\n        globalFilter={globalFilter}\n        onFilterChange={setGlobalFilter}\n      />\n    </div>\n  );\n};\n\n// File browser dialog component\ninterface FileBrowserDialogProps extends Omit<FileBrowserProps, 'onDirectoryChange' | 'showHeader'> {\n  /** Child element that triggers the dialog to open */\n  trigger: React.ReactElement;\n}\n\nexport const FileBrowserDialog: React.FC<FileBrowserDialogProps> = ({\n  trigger,\n  rootPath,\n  directoryPath = rootPath\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [currentDirectory, setCurrentDirectory] = useState<string>(directoryPath);\n  \n  // Update currentDirectory when directoryPath or rootPath changes\n  useEffect(() => {\n    setCurrentDirectory(directoryPath);\n  }, [directoryPath, rootPath]);\n  \n  return (\n    <Dialog open={isOpen} onOpenChange={setIsOpen}>\n      <DialogTrigger asChild>{trigger}</DialogTrigger>\n      <DialogContent className=\"!max-w-4xl\">\n        <DialogHeader>\n          <DialogTitle className=\"text-muted-foreground max-w-3xl text-wrap break-words whitespace-normal\">\n            Files for {currentDirectory}\n          </DialogTitle>\n          <DialogDescription className=\"hidden\">Browse files in bucket</DialogDescription>\n        </DialogHeader>\n        <div className=\"overflow-auto px-2 pt-2\">\n          <FileBrowser\n            rootPath={rootPath}\n            directoryPath={currentDirectory}\n            onDirectoryChange={setCurrentDirectory}\n          />\n        </div>\n        <DialogFooter>\n          <DialogClose asChild>\n            <Button variant=\"outline\">Close</Button>\n          </DialogClose>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n};"],"names":["__iconNode","Undo2","createLucideIcon","CHECKBOX_NAME","createCheckboxContext","createCheckboxScope","createContextScope","CheckboxProviderImpl","useCheckboxContext","CheckboxProvider","props","__scopeCheckbox","checkedProp","children","defaultChecked","disabled","form","name","onCheckedChange","required","value","internal_do_not_use_render","checked","setChecked","useControllableState","control","setControl","React.useState","bubbleInput","setBubbleInput","hasConsumerStoppedPropagationRef","React.useRef","isFormControl","context","isIndeterminate","jsx","isFunction","TRIGGER_NAME","CheckboxTrigger","React.forwardRef","onKeyDown","onClick","checkboxProps","forwardedRef","composedRefs","useComposedRefs","initialCheckedStateRef","React.useEffect","reset","Primitive","getState","composeEventHandlers","event","prevChecked","Checkbox","jsxs","Fragment","CheckboxBubbleInput","INDICATOR_NAME","CheckboxIndicator","forceMount","indicatorProps","Presence","BUBBLE_INPUT_NAME","usePrevious","controlSize","useSize","input","inputProto","bubbles","defaultCheckedRef","className","CheckboxPrimitive.Root","cn","CheckboxPrimitive.Indicator","CheckIcon","formatBytes","bytes","decimals","k","dm","idx","sizes","formatDate","dateString","date","normalizeFileName","fullPath","currentPath","FileBrowser","rootPath","directoryPath","showHeader","onDirectoryChange","currentDirectoryPath","setCurrentDirectoryPath","useState","globalFilter","setGlobalFilter","useEffect","handleDirectoryChange","newPath","data","isLoading","isError","error","useQuery","browseS3Options","tableData","d","downDirClickHandler","next","upDirClickHandler","parts","rootParts","stemPart","endParts","end","handleFileDownload","fileName","baseUrl","url","downloadError","errorMessage","columns","column","SortableHeader","cell","dir","Folder","row","size","ClientDataTable","FileBrowserDialog","trigger","isOpen","setIsOpen","currentDirectory","setCurrentDirectory","Dialog","DialogTrigger","DialogContent","DialogHeader","DialogTitle","DialogDescription","DialogFooter","DialogClose","Button"],"mappings":"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","x_google_ignoreList":[0,1]}