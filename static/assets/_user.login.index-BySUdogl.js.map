{"version":3,"file":"_user.login.index-BySUdogl.js","sources":["../../src/components/login-form-corporate.tsx","../../src/components/login-form-default.tsx","../../src/components/login-form.tsx","../../src/routes/_user.login.index.tsx?tsr-split=component"],"sourcesContent":["import type { OAuthProviderInfo } from '@/client/types.gen'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader } from '@/components/ui/card'\nimport { NGS360Logo } from '@/components/ngs360-logo'\n\ninterface LoginFormCorporateProps {\n  provider: OAuthProviderInfo\n  onLogin: (provider: string, authorizeUrl: string) => void\n  apiUrl: string\n}\n\nexport function LoginFormCorporate({ provider, onLogin, apiUrl }: LoginFormCorporateProps) {\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-primary-2/5 p-4\">\n      <div className=\"w-full max-w-md\">\n        <Card>\n          <CardHeader></CardHeader>\n          <CardContent>\n            <div className=\"flex flex-col gap-6\">\n              {/* Logo and Title Section */}\n              <div className=\"flex flex-col items-center gap-2 text-center\">\n                <NGS360Logo className=\"mb-2\" />\n                <h1 className=\"text-2xl font-bold\">Login</h1>\n                <p className=\"text-sm text-muted-foreground max-w-xs\">\n                  Sign in with your corporate account to access NGS360.\n                </p>\n              </div>\n\n              {/* Corporate SSO Button */}\n              <Button\n                type=\"button\"\n                variant='outline'\n                onClick={() => onLogin(provider.name, `${apiUrl}${provider.authorize_url}`)}\n                className=\"flex items-center gap-2 w-full\"\n                size=\"lg\"\n              >\n                {provider.logo_url && (\n                  <img\n                    src={`${apiUrl}${provider.logo_url}`}\n                    alt={`${provider.display_name} logo`}\n                    className=\"h-5 w-5\"\n                  />\n                )}\n                {provider.display_name}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Footer */}\n        <div className=\"text-center mt-6 text-sm text-muted-foreground\">\n          <p>© {new Date().getFullYear()} BMS NGS360. All rights reserved.</p>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { useState } from 'react'\nimport { Link, useNavigate } from '@tanstack/react-router'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { LoaderCircle } from 'lucide-react'\nimport { z } from 'zod'\nimport { toast } from 'sonner'\nimport type { SubmitHandler } from 'react-hook-form'\nimport type { ComponentPropsWithoutRef } from 'react'\nimport type { OAuthProviderInfo } from '@/client/types.gen'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Card, CardContent, CardHeader } from '@/components/ui/card'\nimport { Separator } from '@/components/ui/separator'\nimport { cn } from '@/lib/utils'\nimport { NGS360Logo } from '@/components/ngs360-logo'\nimport { useAuth } from '@/context/auth-context'\n\n// Define the schema for the form fields\n// This is used to perform client-side validation\nconst schema = z.object({\n  username: z.email('Please enter a valid email address'),\n  password: z.string().min(8, 'Password must be at least 8 characters').max(50),\n})\n\ntype FormFields = z.infer<typeof schema>\n\ninterface LoginFormDefaultProps extends ComponentPropsWithoutRef<'form'> {\n  oauthProviders?: Array<OAuthProviderInfo>\n  onOAuthLogin: (provider: string, authorizeUrl: string) => void\n  apiUrl: string\n}\n\nexport function LoginFormDefault({\n  className,\n  oauthProviders,\n  onOAuthLogin,\n  apiUrl,\n  ...props\n}: LoginFormDefaultProps) {\n  const navigate = useNavigate()\n  const { basicLogin } = useAuth()\n  const [isLoading, setIsLoading] = useState(false)\n\n  const {\n    register,\n    handleSubmit,\n    setError,\n    formState: { errors },\n  } = useForm<FormFields>({\n    defaultValues: {\n      username: '',\n      password: '',\n    },\n    resolver: zodResolver(schema),\n  })\n\n  const onSubmit: SubmitHandler<FormFields> = async (data) => {\n    setIsLoading(true)\n    try {\n      await basicLogin(data.username, data.password)\n      toast.success('Login successful')\n      navigate({ to: '/' })\n    } catch (error: any) {\n      const message = error?.message || 'An unknown error occurred.'\n      setError('root', { message })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-primary-2/5 p-4\">\n      <div className=\"w-full max-w-md\">\n        {/* Login Card */}\n        <Card>\n          <CardHeader></CardHeader>\n          <CardContent>\n            <form\n              onSubmit={handleSubmit(onSubmit)}\n              className={cn('flex flex-col gap-6', className)}\n              {...props}\n            >\n              {/* Logo and Title Section */}\n              <div className=\"flex flex-col items-center gap-2 text-center\">\n                <NGS360Logo className=\"mb-2\" />\n                <h1 className=\"text-2xl font-bold\">Login</h1>\n                <p className=\"text-sm text-muted-foreground max-w-xs\">\n                  Enter your email and password below to login to your NGS360 account.\n                </p>\n              </div>\n\n              <div className=\"grid gap-6\">\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"email\">Email</Label>\n                  <Input\n                    {...register('username')}\n                    id=\"email\"\n                    type=\"email\"\n                    placeholder=\"user@example.com\"\n                    required\n                  />\n                  {errors.username && (\n                    <div className=\"text-red-500 text-xs text-left\">\n                      {errors.username.message}\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"grid gap-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <Label htmlFor=\"password\">Password</Label>\n                    <Link\n                      to=\"/forgot-password\"\n                      className=\"text-xs underline-offset-4 hover:underline\"\n                    >\n                      Forgot your password?\n                    </Link>\n                  </div>\n                  <Input\n                    {...register('password')}\n                    id=\"password\"\n                    type=\"password\"\n                    placeholder=\"********\"\n                    required\n                  />\n                  {errors.password && (\n                    <div className=\"text-red-500 text-xs text-left\">\n                      {errors.password.message}\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              <Button\n                disabled={isLoading}\n                type=\"submit\"\n                className=\"flex items-center gap-2\"\n              >\n                {isLoading ? (\n                  <LoaderCircle className=\"animate-spin h-4 w-4 text-white\" />\n                ) : null}\n                {isLoading ? 'Logging in...' : 'Login'}\n              </Button>\n\n              {errors.root && (\n                <div className=\"text-red-500 text-sm text-center\">\n                  {errors.root.message}\n                </div>\n              )}\n\n              {/* OAuth Providers Section */}\n              {oauthProviders && oauthProviders.length > 0 && (\n                <div className=\"space-y-4\">\n                  <div className=\"relative\">\n                    <div className=\"absolute inset-0 flex items-center\">\n                      <Separator />\n                    </div>\n                    <div className=\"relative flex justify-center text-xs uppercase\">\n                      <span className=\"bg-card px-2 text-muted-foreground\">\n                        or continue with\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"grid gap-2\">\n                    {oauthProviders.map((provider) => (\n                      <Button\n                        key={provider.name}\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={() => onOAuthLogin(provider.name, `${apiUrl}${provider.authorize_url}`)}\n                        className=\"flex items-center gap-2\"\n                      >\n                        {provider.logo_url && (\n                          <img\n                            src={`${provider.logo_url}`}\n                            alt={`${provider.display_name} logo`}\n                            className=\"h-5 w-5\"\n                          />\n                        )}\n                        {provider.display_name}\n                      </Button>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              <div className=\"text-center text-sm\">\n                Don't have an account?{' '}\n                <Link to=\"/register\" className=\"underline underline-offset-4\">\n                  Create an account\n                </Link>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n\n        {/* Footer */}\n        <div className=\"text-center mt-6 text-sm text-muted-foreground\">\n          <p>© {new Date().getFullYear()} BMS NGS360. All rights reserved.</p>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { useQuery } from '@tanstack/react-query'\nimport { getAvailableOauthProvidersOptions } from '@/client/@tanstack/react-query.gen'\nimport { LoginFormCorporate } from '@/components/login-form-corporate'\nimport { LoginFormDefault } from '@/components/login-form-default'\n\nexport function LoginForm() {\n  const apiUrl = import.meta.env.VITE_API_URL.replace(/\\/$/, '')\n  const { data: oauthProviders } = useQuery(getAvailableOauthProvidersOptions())\n\n  const handleOAuthLogin = (provider: string, authorizeUrl: string) => {\n    const redirectUri = `${window.location.origin}/oauth/${provider}/callback`\n    const separator = authorizeUrl.includes('?') ? '&' : '?'\n    window.location.href = `${authorizeUrl}${separator}redirect_uri=${encodeURIComponent(redirectUri)}`\n  }\n\n  // Check for corporate SSO provider\n  const corpProvider = oauthProviders?.providers.find((p) => p.name === 'corp')\n\n  // Render corporate SSO login if corp provider exists\n  if (corpProvider) {\n    return (\n      <LoginFormCorporate\n        provider={corpProvider}\n        onLogin={handleOAuthLogin}\n        apiUrl={apiUrl}\n      />\n    )\n  }\n\n  // Otherwise render standard login form\n  return (\n    <LoginFormDefault\n      oauthProviders={oauthProviders?.providers}\n      onOAuthLogin={handleOAuthLogin}\n      apiUrl={apiUrl}\n    />\n  )\n}\n","import { createFileRoute } from '@tanstack/react-router'\nimport { LoginForm } from '@/components/login-form'\n\nexport const Route = createFileRoute('/_user/login/')({\n  component: RouteComponent,\n})\n\nfunction RouteComponent() {\n  return <LoginForm />\n}\n"],"names":["LoginFormCorporate","provider","onLogin","apiUrl","jsxs","Card","jsx","CardHeader","CardContent","NGS360Logo","Button","schema","z.object","z.email","z.string","LoginFormDefault","className","oauthProviders","onOAuthLogin","props","navigate","useNavigate","basicLogin","useAuth","isLoading","setIsLoading","useState","register","handleSubmit","setError","errors","useForm","zodResolver","onSubmit","data","toast","error","message","cn","Label","Input","Link","LoaderCircle","Separator","LoginForm","useQuery","getAvailableOauthProvidersOptions","handleOAuthLogin","authorizeUrl","redirectUri","separator","corpProvider","p","SplitComponent"],"mappings":"iiBAWO,SAASA,EAAmB,CAAE,SAAAC,EAAU,QAAAC,EAAS,OAAAC,GAAmC,CACzF,aACG,MAAI,CAAA,UAAU,mHACb,SAACC,EAAA,KAAA,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAA,OAACC,EACC,CAAA,SAAA,CAAAC,EAAA,IAACC,EAAW,EAAA,EACXD,MAAAE,EAAA,CACC,SAACJ,EAAAA,KAAA,MAAA,CAAI,UAAU,sBAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,+CACb,SAAA,CAACE,EAAAA,IAAAG,EAAA,CAAW,UAAU,MAAO,CAAA,EAC5BH,EAAA,IAAA,KAAA,CAAG,UAAU,qBAAqB,SAAK,QAAA,EACvCA,EAAA,IAAA,IAAA,CAAE,UAAU,yCAAyC,SAEtD,uDAAA,CAAA,CAAA,EACF,EAGAF,EAAA,KAACM,EAAA,CACC,KAAK,SACL,QAAQ,UACR,QAAS,IAAMR,EAAQD,EAAS,KAAM,GAAGE,CAAM,GAAGF,EAAS,aAAa,EAAE,EAC1E,UAAU,iCACV,KAAK,KAEJ,SAAA,CAAAA,EAAS,UACRK,EAAA,IAAC,MAAA,CACC,IAAK,GAAGH,CAAM,GAAGF,EAAS,QAAQ,GAClC,IAAK,GAAGA,EAAS,YAAY,QAC7B,UAAU,SAAA,CACZ,EAEDA,EAAS,YAAA,CAAA,CAAA,CACZ,CAAA,CACF,CACF,CAAA,CAAA,EACF,EAGCK,MAAA,MAAA,CAAI,UAAU,iDACb,gBAAC,IAAE,CAAA,SAAA,CAAA,KAAG,IAAI,KAAK,EAAE,YAAY,EAAE,mCAAA,CAAA,CAAiC,CAClE,CAAA,CAAA,CAAA,CACF,CACF,CAAA,CAEJ,CCnCA,MAAMK,EAASC,EAAS,CACtB,SAAUC,EAAQ,oCAAoC,EACtD,SAAUC,EAAS,EAAE,IAAI,EAAG,wCAAwC,EAAE,IAAI,EAAE,CAC9E,CAAC,EAUM,SAASC,EAAiB,CAC/B,UAAAC,EACA,eAAAC,EACA,aAAAC,EACA,OAAAf,EACA,GAAGgB,CACL,EAA0B,CACxB,MAAMC,EAAWC,EAAY,EACvB,CAAE,WAAAC,CAAW,EAAIC,EAAQ,EACzB,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAS,EAAK,EAE1C,CACJ,SAAAC,EACA,aAAAC,EACA,SAAAC,EACA,UAAW,CAAE,OAAAC,CAAO,GAClBC,EAAoB,CACtB,cAAe,CACb,SAAU,GACV,SAAU,EACZ,EACA,SAAUC,EAAYrB,CAAM,CAAA,CAC7B,EAEKsB,EAAsC,MAAOC,GAAS,CAC1DT,EAAa,EAAI,EACb,GAAA,CACF,MAAMH,EAAWY,EAAK,SAAUA,EAAK,QAAQ,EAC7CC,EAAM,QAAQ,kBAAkB,EACvBf,EAAA,CAAE,GAAI,IAAK,QACbgB,EAAY,CACb,MAAAC,GAAUD,GAAA,YAAAA,EAAO,UAAW,6BACzBP,EAAA,OAAQ,CAAE,QAAAQ,EAAS,CAAA,QAC5B,CACAZ,EAAa,EAAK,CAAA,CAEtB,EAEA,aACG,MAAI,CAAA,UAAU,mHACb,SAACrB,EAAA,KAAA,MAAA,CAAI,UAAU,kBAEb,SAAA,CAAAA,OAACC,EACC,CAAA,SAAA,CAAAC,EAAA,IAACC,EAAW,EAAA,QACXC,EACC,CAAA,SAAAJ,EAAA,KAAC,OAAA,CACC,SAAUwB,EAAaK,CAAQ,EAC/B,UAAWK,EAAG,sBAAuBtB,CAAS,EAC7C,GAAGG,EAGJ,SAAA,CAACf,EAAAA,KAAA,MAAA,CAAI,UAAU,+CACb,SAAA,CAACE,EAAAA,IAAAG,EAAA,CAAW,UAAU,MAAO,CAAA,EAC5BH,EAAA,IAAA,KAAA,CAAG,UAAU,qBAAqB,SAAK,QAAA,EACvCA,EAAA,IAAA,IAAA,CAAE,UAAU,yCAAyC,SAEtD,sEAAA,CAAA,CAAA,EACF,EAEAF,EAAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,aACb,SAAA,CAACE,EAAA,IAAAiC,EAAA,CAAM,QAAQ,QAAQ,SAAK,QAAA,EAC5BjC,EAAA,IAACkC,EAAA,CACE,GAAGb,EAAS,UAAU,EACvB,GAAG,QACH,KAAK,QACL,YAAY,mBACZ,SAAQ,EAAA,CACV,EACCG,EAAO,UACLxB,MAAA,MAAA,CAAI,UAAU,iCACZ,SAAAwB,EAAO,SAAS,OACnB,CAAA,CAAA,EAEJ,EAEA1B,EAAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACE,EAAA,IAAAiC,EAAA,CAAM,QAAQ,WAAW,SAAQ,WAAA,EAClCjC,EAAA,IAACmC,EAAA,CACC,GAAG,mBACH,UAAU,6CACX,SAAA,uBAAA,CAAA,CAED,EACF,EACAnC,EAAA,IAACkC,EAAA,CACE,GAAGb,EAAS,UAAU,EACvB,GAAG,WACH,KAAK,WACL,YAAY,WACZ,SAAQ,EAAA,CACV,EACCG,EAAO,UACLxB,MAAA,MAAA,CAAI,UAAU,iCACZ,SAAAwB,EAAO,SAAS,OACnB,CAAA,CAAA,CAEJ,CAAA,CAAA,EACF,EAEA1B,EAAA,KAACM,EAAA,CACC,SAAUc,EACV,KAAK,SACL,UAAU,0BAET,SAAA,CAAAA,EACElB,EAAA,IAAAoC,EAAA,CAAa,UAAU,iCAAkC,CAAA,EACxD,KACHlB,EAAY,gBAAkB,OAAA,CAAA,CACjC,EAECM,EAAO,MACLxB,MAAA,MAAA,CAAI,UAAU,mCACZ,SAAAwB,EAAO,KAAK,OACf,CAAA,EAIDb,GAAkBA,EAAe,OAAS,GACxCb,EAAAA,KAAA,MAAA,CAAI,UAAU,YACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,WACb,SAAA,CAAAE,MAAC,MAAI,CAAA,UAAU,qCACb,SAAAA,MAACqC,GAAU,CAAA,EACb,EACArC,EAAAA,IAAC,OAAI,UAAU,iDACb,eAAC,OAAK,CAAA,UAAU,qCAAqC,SAAA,kBAErD,CAAA,CACF,CAAA,CAAA,EACF,QAEC,MAAI,CAAA,UAAU,aACZ,SAAeW,EAAA,IAAKhB,GACnBG,EAAA,KAACM,EAAA,CAEC,KAAK,SACL,QAAQ,UACR,QAAS,IAAMQ,EAAajB,EAAS,KAAM,GAAGE,CAAM,GAAGF,EAAS,aAAa,EAAE,EAC/E,UAAU,0BAET,SAAA,CAAAA,EAAS,UACRK,EAAA,IAAC,MAAA,CACC,IAAK,GAAGL,EAAS,QAAQ,GACzB,IAAK,GAAGA,EAAS,YAAY,QAC7B,UAAU,SAAA,CACZ,EAEDA,EAAS,YAAA,CAAA,EAbLA,EAAS,IAAA,CAejB,CACH,CAAA,CAAA,EACF,EAGFG,EAAAA,KAAC,MAAI,CAAA,UAAU,sBAAsB,SAAA,CAAA,yBACZ,UACtBqC,EAAK,CAAA,GAAG,YAAY,UAAU,+BAA+B,SAE9D,mBAAA,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CAAA,CAEJ,CAAA,CAAA,EACF,EAGCnC,MAAA,MAAA,CAAI,UAAU,iDACb,gBAAC,IAAE,CAAA,SAAA,CAAA,KAAG,IAAI,KAAK,EAAE,YAAY,EAAE,mCAAA,CAAA,CAAiC,CAClE,CAAA,CAAA,CAAA,CACF,CACF,CAAA,CAEJ,CCzMO,SAASsC,GAAY,CAC1B,MAAMzC,EAAS,iCAA6B,QAAQ,MAAO,EAAE,EACvD,CAAE,KAAMc,CAAmB,EAAA4B,EAASC,GAAmC,EAEvEC,EAAmB,CAAC9C,EAAkB+C,IAAyB,CACnE,MAAMC,EAAc,GAAG,OAAO,SAAS,MAAM,UAAUhD,CAAQ,YACzDiD,EAAYF,EAAa,SAAS,GAAG,EAAI,IAAM,IAC9C,OAAA,SAAS,KAAO,GAAGA,CAAY,GAAGE,CAAS,gBAAgB,mBAAmBD,CAAW,CAAC,EACnG,EAGME,EAAelC,GAAA,YAAAA,EAAgB,UAAU,KAAMmC,GAAMA,EAAE,OAAS,QAGtE,OAAID,EAEA7C,EAAA,IAACN,EAAA,CACC,SAAUmD,EACV,QAASJ,EACT,OAAA5C,CAAA,CACF,EAMFG,EAAA,IAACS,EAAA,CACC,eAAgBE,GAAA,YAAAA,EAAgB,UAChC,aAAc8B,EACd,OAAA5C,CAAA,CACF,CAEJ,CCpCmDkD,MAAAA,GAAA,UAMzB,CACxB,aAAQT,EAAY,EAAA,CACtB"}