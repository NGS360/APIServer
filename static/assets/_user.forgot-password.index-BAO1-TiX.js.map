{"version":3,"file":"_user.forgot-password.index-BAO1-TiX.js","sources":["../../src/components/forgot-password-form.tsx","../../src/routes/_user.forgot-password.index.tsx?tsr-split=component"],"sourcesContent":["import { useState } from 'react'\nimport { useNavigate } from '@tanstack/react-router'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { useMutation } from '@tanstack/react-query'\nimport { LoaderCircle } from 'lucide-react'\nimport { z } from 'zod'\nimport { toast } from 'sonner'\nimport type { ComponentPropsWithoutRef } from 'react'\nimport type { SubmitHandler } from 'react-hook-form'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Card, CardContent, CardHeader } from '@/components/ui/card'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { cn } from '@/lib/utils'\nimport { requestPasswordResetMutation } from '@/client/@tanstack/react-query.gen'\nimport { NGS360Logo } from '@/components/ngs360-logo'\n\nconst schema = z.object({\n  email: z.string().email('Please enter a valid email address'),\n})\n\ntype FormFields = z.infer<typeof schema>\n\nexport function ForgotPasswordForm({\n  className,\n  ...props\n}: ComponentPropsWithoutRef<'form'>) {\n  const navigate = useNavigate()\n  const [showSuccessDialog, setShowSuccessDialog] = useState(false)\n  const [sentEmail, setSentEmail] = useState('')\n\n  const {\n    register,\n    handleSubmit,\n    setError,\n    formState: { errors, isSubmitting },\n  } = useForm<FormFields>({\n    defaultValues: {\n      email: '',\n    },\n    resolver: zodResolver(schema),\n  })\n\n  const { mutate, isPending } = useMutation({\n    ...requestPasswordResetMutation(),\n    onError: (error) => {\n      const message =\n        error.response?.data.detail?.toString() || 'An unknown error occurred.'\n      setError('root', { message })\n    },\n    onSuccess: (_, variables) => {\n      toast.success('Password reset email sent. Please check your inbox.')\n      setSentEmail(variables.body.email)\n      setShowSuccessDialog(true)\n    },\n  })\n\n  const onSubmit: SubmitHandler<FormFields> = (data) => {\n    mutate({ body: { ...data } })\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-primary-2/5 p-4\">\n      <div className=\"w-full max-w-md\">\n        <Card>\n          <CardHeader></CardHeader>\n          <CardContent>\n            <form\n              onSubmit={handleSubmit(onSubmit)}\n              className={cn('flex flex-col gap-6', className)}\n              {...props}\n            >\n              {/* Logo and Title Section */}\n              <div className=\"flex flex-col items-center gap-2 text-center\">\n                <NGS360Logo className=\"mb-2\" />\n                <h1 className=\"text-2xl font-bold\">Password Reset</h1>\n                <p className=\"text-sm text-muted-foreground max-w-xs\">\n                  Send an email to reset your NGS360 account password.\n                </p>\n              </div>\n\n              <div className=\"grid gap-2\">\n                <Label htmlFor=\"email\">Email</Label>\n                <Input\n                  {...register('email')}\n                  id=\"email\"\n                  type=\"email\"\n                  placeholder=\"user@example.com\"\n                  required\n                />\n                {errors.email && (\n                  <div className=\"text-red-500 text-xs text-left\">\n                    {errors.email.message}\n                  </div>\n                )}\n              </div>\n\n              <Button\n                disabled={isSubmitting || isPending}\n                type=\"submit\"\n                className=\"flex items-center gap-2\"\n              >\n                {isSubmitting || isPending ? (\n                  <LoaderCircle className=\"animate-spin h-4 w-4 text-white\" />\n                ) : null}\n                {isSubmitting || isPending ? 'Sending...' : 'Send Email'}\n              </Button>\n\n              {errors.root && (\n                <div className=\"text-red-500 text-sm text-center\">\n                  {errors.root.message}\n                </div>\n              )}\n            </form>\n          </CardContent>\n        </Card>\n\n        {/* Footer */}\n        <div className=\"text-center mt-6 text-sm text-muted-foreground\">\n          <p>Â© {new Date().getFullYear()} BMS NGS360. All rights reserved.</p>\n        </div>\n      </div>\n\n      {/* Success Dialog */}\n      <Dialog open={showSuccessDialog} onOpenChange={setShowSuccessDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Success!</DialogTitle>\n            <DialogDescription>\n              A password reset link has been sent to <strong>{sentEmail}</strong>.<br />\n              Please check your inbox and follow the instructions to reset your password.\n            </DialogDescription>\n          </DialogHeader>\n          <DialogFooter>\n            <Button\n              onClick={() => {\n                setShowSuccessDialog(false)\n                navigate({ to: '/login' })\n              }}\n            >\n              Continue\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n","import { createFileRoute } from '@tanstack/react-router'\nimport { ForgotPasswordForm } from '@/components/forgot-password-form'\n\nexport const Route = createFileRoute('/_user/forgot-password/')({\n  component: RouteComponent,\n})\n\nfunction RouteComponent() {\n  return <ForgotPasswordForm />\n}\n"],"names":["schema","z.object","z.string","ForgotPasswordForm","className","props","navigate","useNavigate","showSuccessDialog","setShowSuccessDialog","useState","sentEmail","setSentEmail","register","handleSubmit","setError","errors","isSubmitting","useForm","zodResolver","mutate","isPending","useMutation","requestPasswordResetMutation","error","message","_b","_a","_","variables","toast","onSubmit","data","jsxs","Card","jsx","CardHeader","CardContent","cn","NGS360Logo","Label","Input","Button","LoaderCircle","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","DialogFooter","SplitComponent"],"mappings":"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"}