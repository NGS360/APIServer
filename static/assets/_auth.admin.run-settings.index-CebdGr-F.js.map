{"version":3,"file":"_auth.admin.run-settings.index-CebdGr-F.js","sources":["../../src/routes/_auth.admin.run-settings.index.tsx?tsr-split=component"],"sourcesContent":["import { useMutation, useQuery, useQueryClient } from '@tanstack/react-query'\nimport { createFileRoute } from '@tanstack/react-router'\nimport { toast } from 'sonner'\nimport type { AxiosError } from 'axios'\nimport type { HttpValidationError, Setting } from '@/client'\nimport { getSettingsByTagOptions, getSettingsByTagQueryKey, updateSettingMutation } from '@/client/@tanstack/react-query.gen'\nimport { SettingCard } from '@/components/app-setting-card'\n\nexport const Route = createFileRoute('/_auth/admin/run-settings/')({\n  component: RouteComponent,\n})\n\nfunction RouteComponent() {\n  const { data: settings, error } = useQuery(\n    getSettingsByTagOptions({\n      query: {\n        tag_key: 'category',\n        tag_value: 'run settings',\n      },\n    })\n  )\n\n  const queryClient = useQueryClient()\n  const { mutate: updateSetting, isPending } = useMutation({\n    ...updateSettingMutation(),\n    onError: (mutationError: AxiosError<HttpValidationError>) => {\n      const message = mutationError.response?.data.detail?.toString()\n        || \"An unknown error occurred.\"\n      toast.error(`Failed to update setting: ${message}`)\n    },\n    onSuccess: (data: Setting) => {\n      queryClient.invalidateQueries({ \n        queryKey: getSettingsByTagQueryKey({\n          query: {\n            tag_key: 'category',\n            tag_value: 'run settings',\n          },\n        })\n      })\n      toast.success(`Successfully updated ${data.name}`)\n    }\n  })\n\n  const handleSave = (key: string, value: string) => {\n    updateSetting({\n      path: {\n        key,\n      },\n      body: {\n        value,\n      },\n    })\n  }\n\n  \n  if (error) return <div className='text-destructive'>Error loading settings: {error.message}</div>\n  if (!settings || settings.length === 0) {\n    return (\n      <div className='flex flex-col gap-6'>\n        <div className='flex flex-col gap-2'>\n          <h1 className=\"text-3xl\">Illumina Run Settings</h1>\n          <p className=\"text-muted-foreground\">\n            Manage and configure global illumina run settings for NGS360.\n          </p>\n        </div>\n        <div className=\"border rounded-lg p-6\">\n          <p className=\"text-muted-foreground\">No illumina run settings found.</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className='flex flex-col gap-6'>\n      <div className='flex flex-col gap-2'>\n        <h1 className=\"text-3xl\">Illumina Run Settings</h1>\n        <p className=\"text-muted-foreground\">\n          Manage and configure global illumina run settings for NGS360.\n        </p>\n      </div>\n      \n      <div className='grid gap-4'>\n        {settings.map((setting) => (\n          <SettingCard \n            key={setting.key} \n            setting={setting} \n            isPending={isPending}\n            onSave={handleSave}\n          />\n        ))}\n      </div>\n    </div>\n  )\n}\n"],"names":["SplitComponent","data","settings","error","useQuery","getSettingsByTagOptions","query","tag_key","tag_value","queryClient","useQueryClient","mutate","updateSetting","isPending","useMutation","updateSettingMutation","onError","mutationError","message","response","detail","toString","onSuccess","invalidateQueries","queryKey","getSettingsByTagQueryKey","toast","success","name","handleSave","key","value","path","body","jsxs","length","jsx","map","setting","SettingCard"],"mappings":"uXAM2DA,MAAAA,EAAA,UAMjC,CAClB,KAAA,CAAEC,KAAMC,EAAUC,MAAAA,CAAAA,EAAUC,EAChCC,EAAwB,CACtBC,MAAO,CACLC,QAAS,WACTC,UAAW,cAAA,CACb,CACD,CACH,EAEMC,EAAcC,EAAe,EAC7B,CAAEC,OAAQC,EAAeC,UAAAA,GAAcC,EAAY,CACvD,GAAGC,EAAsB,EACzBC,QAAUC,GAAmD,SAC3D,MAAMC,IAAUD,GAAAA,EAAAA,EAAcE,WAAdF,YAAAA,EAAwBhB,KAAKmB,SAA7BH,YAAAA,EAAqCI,aAChD,6BACClB,EAAAA,MAAM,6BAA6Be,CAAO,EAAE,CACpD,EACAI,UAAYrB,GAAkB,CAC5BQ,EAAYc,kBAAkB,CAC5BC,SAAUC,EAAyB,CACjCnB,MAAO,CACLC,QAAS,WACTC,UAAW,cAAA,CAEd,CAAA,CAAA,CACF,EACDkB,EAAMC,QAAQ,wBAAwB1B,EAAK2B,IAAI,EAAE,CAAA,CACnD,CACD,EAEKC,EAAaA,CAACC,EAAaC,IAAkB,CACnCnB,EAAA,CACZoB,KAAM,CACJF,IAAAA,CACF,EACAG,KAAM,CACJF,MAAAA,CAAAA,CACF,CACD,CACH,EAGA,OAAI5B,EAAe+B,OAAA,MAAA,CAAI,UAAU,mBAAmB,SAAA,CAAA,2BAAyB/B,EAAMe,OAAAA,EAAQ,EACvF,CAAChB,GAAYA,EAASiC,SAAW,EAEjCD,EAAA,KAAC,MAAI,CAAA,UAAU,sBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,sBACb,SAAA,CAACE,EAAA,IAAA,KAAA,CAAG,UAAU,WAAW,SAAqB,wBAAA,EAC7CA,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAuB,SAEpC,+DAAA,CAAA,CAAA,EACF,EACAA,EAAAA,IAAC,OAAI,UAAU,wBACb,eAAC,IAAE,CAAA,UAAU,wBAAwB,SAAA,iCAA+B,CAAA,CACtE,CAAA,CAAA,EACF,EAKFF,EAAA,KAAC,MAAI,CAAA,UAAU,sBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,sBACb,SAAA,CAACE,EAAA,IAAA,KAAA,CAAG,UAAU,WAAW,SAAqB,wBAAA,EAC7CA,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAuB,SAEpC,+DAAA,CAAA,CAAA,EACF,QAEC,MAAI,CAAA,UAAU,aACZlC,SAAAA,EAASmC,IACRC,GAAAF,EAAA,IAACG,EAEC,CAAA,QAAAD,EACA,UAAAzB,EACA,OAAQgB,GAHHS,EAAQR,IAKhB,CACH,CAAA,CAAA,EACF,CAEJ"}