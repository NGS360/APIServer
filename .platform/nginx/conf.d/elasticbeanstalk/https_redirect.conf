# Force HTTPS redirect for all HTTP requests
# This configuration checks the X-Forwarded-Proto header set by the Elastic Beanstalk load balancer

# Redirect HTTP to HTTPS
if ($http_x_forwarded_proto = 'http') {
    return 301 https://$host$request_uri;
}

# Add HSTS (HTTP Strict Transport Security) header to enforce HTTPS
# This tells browsers to always use HTTPS for this domain
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;